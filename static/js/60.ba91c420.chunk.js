(this["webpackJsonphb-frontend"]=this["webpackJsonphb-frontend"]||[]).push([[60],{1050:function(e,t,a){"use strict";a.r(t);var n=a(7),c=a(3),s=a(16),i=a(1),r=a(19),l=a(602),o=a(603),d=a(32),j=a(29),u=a(38),b=a(96),h=a(611),m=function(e){return o.b().shape({title_treatments:o.d().trim().required("Category name is required")})},O=function(e){var t=e.searchCategories,a=e.show,n=e.initialValues,o=e.callApi,O=e.type,p=Object(i.useRef)(null),g=Object(i.useState)(!1),x=Object(s.a)(g,2),y=x[0],f=x[1],w=function(){p.current.resetForm(),e.handleClose(),f(!1)};return Object(c.jsxs)(b.c,{centered:!0,show:a,onClose:w,closeOnBackdrop:!1,children:[Object(c.jsxs)(b.d,{children:["create"===O?"Create New":"Edit"," Category",Object(c.jsx)(b.b,{onClick:function(){p.current.dirty?f(!0):w()}})]}),Object(c.jsxs)(r.D,{className:"popup--update-user",children:[Object(c.jsxs)(b.c,{size:"sm",show:y,centered:!0,closeOnBackdrop:!1,children:[Object(c.jsx)(r.D,{style:{textAlign:"center",padding:20},children:"Are you sure you want to discard your changes?"}),Object(c.jsxs)(r.E,{style:{display:"flex",justifyContent:"space-around"},children:[Object(c.jsx)("button",{className:"btn btn-danger",style:{width:120},color:"danger",onClick:w,children:"Discard"}),Object(c.jsx)("button",{style:{width:120},className:"btn btn-primary",onClick:function(){return f(!1)},children:"Keep Editing"})]})]}),Object(c.jsx)(r.I,{className:"justify-content-center",children:Object(c.jsx)(r.j,{md:"12",children:Object(c.jsx)(r.h,{children:Object(c.jsx)(r.e,{className:"popup--update-user__card--wrapper",children:Object(c.jsx)(r.f,{children:Object(c.jsx)(l.c,{innerRef:p,enableReinitialize:!0,initialValues:n,validate:Object(d.A)(m),onSubmit:function(e){var a={title_treatments:e.title_treatments.trim(),description:e.description.trim()};o({method:"create"===O?"post":"put",api:j.d.rest.adminConsultingCategory(n.id),body:a,loading:!0},(function(e){e.status===u.c&&(w(),t())}))},children:function(e){var t=e.values,a=e.errors,n=e.touched,s=e.dirty,i=e.handleChange,l=e.handleBlur,o=e.handleSubmit,d=e.isValid;return Object(c.jsxs)(r.q,{onSubmit:o,children:[Object(c.jsx)(h.a,{label:"Category Name (*)",width:140,children:Object(c.jsxs)(r.r,{className:"m-0",children:[Object(c.jsx)(r.u,{type:"text",placeholder:"Category Name (*)",invalid:""!==t.title_treatments.trim()&&n.title_treatments&&!!a.title_treatments,maxLength:100,value:t.title_treatments,onBlur:l,onChange:i,name:"title_treatments"}),Object(c.jsx)(r.A,{children:a.title_treatments})]})}),Object(c.jsx)(h.a,{label:"Description",width:140,children:Object(c.jsx)(r.O,{type:"text",placeholder:"Description",maxLength:1e3,value:t.description,onBlur:l,onChange:i,name:"description",rows:5})}),Object(c.jsx)(r.r,{className:"mb-0",children:Object(c.jsx)(r.I,{children:Object(c.jsxs)(r.j,{xs:"12",style:{textAlign:"right"},children:[Object(c.jsx)(r.d,{color:"secondary",className:"px-4 mr-4",onClick:w,children:"Cancel"}),Object(c.jsx)(r.d,{color:"primary",className:"px-4",type:"submit",disabled:!(d&&s),children:"create"===O?"Create":"Save"})]})})})]})}})})})})})})]})]})},p=a(190),g=a(31),x=a(186),y={title_treatments:"",description:""};t.default=function(e){var t=Object(x.b)().callApi,a=Object(i.useState)({data:[],total:0,page:1,totalPages:0,loading:!0}),l=Object(s.a)(a,2),o=l[0],d=l[1],h=Object(i.useState)({show:!1,initialValues:y,type:"create"}),m=Object(s.a)(h,2),f=m[0],w=m[1],C=Object(i.useState)({show:!1,id:"",name:""}),v=Object(s.a)(C,2),N=v[0],_=v[1],k=Object(i.useState)({show:!1,id:"",name:""}),S=Object(s.a)(k,2),B=S[0],A=S[1],D=Object(i.useState)(""),V=Object(s.a)(D,2),T=V[0],P=V[1],q=[{key:"no",_style:{width:"4%"}},{key:"title_treatments",label:"Category Name",_style:{width:"24%"}},{key:"description",_style:{width:"24%"}},{key:"created_date",_style:{width:"12%"},isDate:!0},{key:"diseases_number",label:"Number Of Consultation Topics",_style:{width:"18%"}},{key:"action",_style:{width:"10%"},renderContent:function(e){return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(r.d,{color:"primary",variant:"outline",shape:"square",size:"sm",style:{marginRight:10},onClick:function(){return _({show:!0,id:e.id,name:e.title_treatments})},children:Object(c.jsx)("i",{className:"fas fa-trash-alt",children:" "})}),Object(c.jsx)(r.d,{color:"primary",variant:"outline",shape:"square",size:"sm",onClick:function(){return w({show:!0,type:"update",initialValues:e})},children:Object(c.jsx)("i",{className:"fas fa-pencil-alt",children:" "})})]})}}];Object(i.useEffect)((function(){z(1,T)}),[]);var E=Object(c.jsx)("div",{});o.loading||o.total||(E=Object(c.jsx)("div",{children:"No results"}));var z=function(e,a){d(Object(n.a)(Object(n.a)({},o),{},{loading:!0})),t({method:"get",api:j.d.rest.adminGetConsultingCategories(e,a)},(function(t){var a=t.status,c=t.data;a===u.c?d({data:c.categories.map((function(t,a){return Object(n.a)(Object(n.a)({},t),{},{no:a+1+10*(e-1)})})),page:e,total:c.total,totalPages:Math.ceil(c.total/10),loading:!1}):d((function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:!1})}))}))};return Object(c.jsxs)("div",{className:"px-5 mx-3",style:{marginTop:10},children:[Object(c.jsx)(O,Object(n.a)(Object(n.a)({callApi:t},f),{},{handleClose:function(){return w(Object(n.a)(Object(n.a)({},f),{},{show:!1}))},searchCategories:function(){return z(o.page,T)}})),Object(c.jsx)(b.e,{isVisible:N.show,title:"Delete Category",renderContent:Object(g.a)("Are you sure to delete the category",N.name,"If yes, all the diseases in this category are also deleted immediately!"),leftButtonText:"No",rightButtonText:"Yes",leftButtonOnPress:function(){return _(Object(n.a)(Object(n.a)({},N),{},{show:!1}))},rightButtonOnPress:function(){A({show:!0,id:N.id,name:N.name}),_(Object(n.a)(Object(n.a)({},N),{},{show:!1}))}}),Object(c.jsx)(b.f,{isVisible:B.show,title:"Delete Category",leftButtonText:"Cancel",rightButtonText:"Delete",type:"category",name:B.name,callback:function(e){return function(e,a){_(Object(n.a)(Object(n.a)({},N),{},{show:!1})),d(Object(n.a)(Object(n.a)({},o),{},{loading:!0})),t({method:"post",api:j.d.rest.confirmPassword(),body:{password:a}},(function(a){a.status===u.c?t({method:"delete",api:j.d.rest.adminConsultingCategory(e)},(function(e){e.status===u.c?z(o.page,T):d((function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:!1})}))})):d((function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:!1})}))}))}(B.id,e)},handleClose:function(){return A(Object(n.a)(Object(n.a)({},B),{},{show:!1}))}}),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Category Management"}),Object(c.jsxs)("div",{className:"d-flex align-items-center justify-content-between mt-4",style:{marginBottom:"2.4rem"},children:[Object(c.jsx)(p.a,{className:"mr-5",searchName:T,setSearchName:P,searchEmpty:!0,callbackSearch:function(e){return z(1,e)}}),Object(c.jsx)(r.d,{color:"primary",onClick:function(){return w({type:"create",show:!0,initialValues:y})},children:"Add new category"})]})]}),Object(c.jsx)("div",{className:"hb-table",children:Object(c.jsx)(r.l,{items:o.data,fields:q,loading:o.loading,noItemsViewSlot:E,hover:!0,striped:!0,scopedSlots:Object(g.k)(q)})}),Object(g.j)(o.totalPages,o.page,(function(e){o.page!==e&&z(e,T)}),o.total)]})}},611:function(e,t,a){"use strict";var n=a(3);a(1);t.a=function(e){var t=e.className,a=e.label,c=e.children,s=e.width,i=e.centered,r=e.style;return s=s||110,Object(n.jsxs)("div",{className:"d-flex mb-3 ".concat(i?"align-items-center":""," ").concat(t||""),style:r,children:[Object(n.jsx)("div",{style:{minWidth:s,marginTop:6},children:a}),Object(n.jsx)("div",{style:{width:"calc(100% - ".concat(s,"px)")},children:c})]})}}}]);
//# sourceMappingURL=60.ba91c420.chunk.js.map