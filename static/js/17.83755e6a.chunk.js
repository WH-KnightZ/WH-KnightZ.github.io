(this["webpackJsonphb-frontend"]=this["webpackJsonphb-frontend"]||[]).push([[17],{1041:function(e,t,n){"use strict";n.r(t);var a=n(7),c=n(3),s=n(16),i=n(1),r=n(856),o=n(115),l=n(739),u=(n(865),function(e){var t=e.audio,n=e.video,a=e.joinMeeting,r=Object(i.useState)(t),u=Object(s.a)(r,2),d=u[0],b=u[1],v=Object(i.useState)(n),p=Object(s.a)(v,2),h=p[0],g=p[1];return Object(c.jsx)(o.i,{contentClassname:"padding-small",backdropOpacity:0,show:!0,onClose:function(){},closeOnBackdrop:!1,centered:!0,closeBtn:!0,children:Object(c.jsxs)("div",{className:"text-center",children:[Object(c.jsx)("h2",{className:"Options-title",children:"Teilnehmeroptionen"}),Object(c.jsx)(l.c,{label:"Ton einschalten",switchState:d,setSwitchState:b}),Object(c.jsx)("div",{className:"Options-hr"}),Object(c.jsx)(l.c,{label:"Video einschalten",switchState:h,setSwitchState:g}),Object(c.jsx)("div",{className:"Options-btn-join",children:Object(c.jsx)(o.c,{onClick:function(){a(d,h)},children:"Teilnehmen"})})]})})}),d=(n(655),0),b=1,v=2;t.default=function(e){var t,n,o=(null===(t=e.match)||void 0===t?void 0:t.params).id,l=Object(i.useState)({audio:!1,video:!0}),p=Object(s.a)(l,2),h=p[0],g=p[1],f=Object(i.useState)(b),j=Object(s.a)(f,2),m=j[0],O=j[1];switch(m){case d:n=Object(c.jsx)("div",{});break;case b:n=Object(c.jsx)(u,Object(a.a)(Object(a.a)({},h),{},{joinMeeting:function(e,t){g({audio:e,video:t}),O(v)}}));break;case v:n=Object(c.jsx)(r.a,Object(a.a)(Object(a.a)({},h),{},{meetingId:o,leaveMeeting:function(){O(b)}}))}return Object(c.jsx)("div",{className:"petrol",children:Object(c.jsx)("div",{className:"hb-background",style:{minHeight:"100vh"},children:n})})}},739:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return l}));var a=n(3),c=n(1),s=(n(861),function(e){var t=e.title,n=e.icon,c=e.onClick,s=e.isLeave,i=e.disabled,r=e.className,o=void 0===r?"":r;return Object(a.jsx)("span",{title:t,onClick:c,className:"ControlButton__btn".concat(i?" disabled":"").concat(s?" leave":""," ").concat(o),children:Object(a.jsx)("i",{className:"hb-icon-".concat(n," ")})})}),i=n(16),r=(n(862),function(e){var t=e.onSubmit,n=Object(c.useState)(""),s=Object(i.a)(n,2),r=s[0],o=s[1],l=function(e){e.preventDefault(),t(r),o("")};return Object(a.jsx)("form",{onSubmit:l,children:Object(a.jsxs)("div",{className:"MessageInput",children:[Object(a.jsx)("input",{placeholder:"Antworten ...",value:r,onChange:function(e){return o(e.target.value)}}),Object(a.jsx)("button",{children:Object(a.jsx)("i",{className:"hb-icon-send-2",onClick:l})})]})})}),o=n(115),l=(n(863),function(e){var t=e.label,n=e.switchState,c=e.setSwitchState;return Object(a.jsxs)("div",{className:"RenderSwitch-switch-wrapper",children:[Object(a.jsx)("h6",{className:"RenderSwitch-switch-wrapper__label",children:t}),Object(a.jsx)(o.n,{checked:n,onClick:function(){return c(!n)}})]})})},856:function(e,t,n){"use strict";(function(e){var a=n(3),c=n(47),s=n(16),i=n(1),r=n(857),o=n.n(r),l=n(858),u=n(859),d=n(739);n(864);o.a.Logger.setLogLevel(4);t.a=function(t){var n=t.audio,r=t.video,b=t.meetingId,v=t.leaveMeeting,p=b,h=l.a,g=l.b,f=Object(i.useRef)({}),j=Object(i.useRef)(null),m=Object(i.useRef)({}),O=Object(i.useRef)({}),x=Object(i.useRef)(""),C=Object(i.useRef)(null),A=Object(i.useState)("pip"),y=Object(s.a)(A,2),w=y[0],S=(y[1],Object(i.useState)([])),N=Object(s.a)(S,2),k=N[0],I=N[1],M=Object(i.useState)(!1),L=Object(s.a)(M,2),T=L[0],V=L[1],_=Object(i.useState)(!1),E=Object(s.a)(_,2),q=E[0],B=(E[1],Object(i.useState)([])),P=Object(s.a)(B,2),R=P[0],D=P[1],Z=Object(i.useState)(0),z=Object(s.a)(Z,2),F=z[0],G=z[1],J=Object(i.useState)(100),U=Object(s.a)(J,2),Y=(U[0],U[1],Object(i.useCallback)((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];I((function(n){return n.some((function(t){return t.getId()===e.getId()}))?n:t?n.concat([e]):[e].concat(n)}))}),[])),H=Object(i.useCallback)((function(e,t,a){var c={streamID:e,audio:n,video:r,screen:!1},s=o.a.createStream(c);return s.setVideoProfile(t),s}),[]),Q=Object(i.useCallback)((function(){f.current.on("stream-added",(function(e){var t=e.stream;console.log("New stream added: "+t.getId()),D([].concat(Object(c.a)(R),["New stream added: "+t.getId()])),console.log("At "+(new Date).toLocaleTimeString()),console.log("Subscribe ",t),f.current.subscribe(t,(function(e){console.log("Subscribe stream failed",e)}))})),f.current.on("peer-leave",(function(e){console.log("Peer has left: "+e.uid),console.log((new Date).toLocaleTimeString()),console.log(e),K(e.uid)})),f.current.on("stream-subscribed",(function(e){var t=e.stream;console.log("Got stream-subscribed event"),console.log((new Date).toLocaleTimeString()),console.log("Subscribe remote stream successfully: "+t.getId()),console.log(e),Y(t)})),f.current.on("stream-removed",(function(e){var t=e.stream;console.log("Stream removed: "+t.getId()),console.log((new Date).toLocaleTimeString()),console.log(e),K(t.getId())}))}),[]),K=Object(i.useCallback)((function(e){I((function(t){for(var n=0;n<t.length;n++){var a=t[n];if(a.getId()===e){a.close();var s,i=document.querySelector("#ag-item-"+e);if(i)null===i||void 0===i||null===(s=i.parentNode)||void 0===s||s.removeChild(i);var r=Object(c.a)(t);return r.splice(n,1),r}}return t}))}),[]),W=function(e){return D((function(t){return[].concat(Object(c.a)(t),[e])}))};Object(i.useLayoutEffect)((function(){var e={mode:"interop"};f.current=o.a.createClient(e),f.current.init(h,(function(){console.log("AgoraRTC client initialized"),Q(),f.current.join(g,p,528702,(function(e){var t;x.current=e,console.log("User "+e+" join channel successfully"),console.log("At "+(new Date).toLocaleTimeString()),C.current=new u.a(h,e,"test",l.c,W),j.current=H(e,"480p_4"),null===(t=j.current)||void 0===t||t.init((function(){r&&(console.log(j.current),Y(j.current,!0),f.current.publish(j.current,(function(e){console.log("Publish local stream error: "+e)}))),V(!0)}),(function(e){console.log("getUserMedia failed",e),V(!0)}))}))}))}),[]),Object(i.useEffect)((function(){var t=document.querySelector("#ag-canvas"),n=document.querySelector(".ag-btn-group");return null===t||void 0===t||t.addEventListener("mousemove",(function(){e._toolbarToggle&&clearTimeout(e._toolbarToggle),null===n||void 0===n||n.classList.add("active"),e._toolbarToggle=setTimeout((function(){null===n||void 0===n||n.classList.remove("active")}),2e3)})),function(){var e,t,n,a,c;(null===(e=f.current)||void 0===e||e.unpublish(j.current),null===(t=j.current)||void 0===t||t.close(),q)&&(null===(a=m.current)||void 0===a||a.unpublish(O.current),null===(c=O.current)||void 0===c||c.close());null===(n=f.current)||void 0===n||n.leave((function(){console.log("Client succeed to leave.")}),(function(){console.log("Client failed to leave.")}))}}),[]);!function(){var e,t,n=document.querySelector("#ag-canvas");if("pip"===w){k.length;var a=0;k.map((function(e,t){var c,s,i=e.getId(),r=document.querySelector("#ag-item-"+i),o=document.querySelector("#ag-item-btn-reverse-"+i);if(!r){(r=document.createElement("section")).setAttribute("id","ag-item-"+i),(o=document.createElement("button")).setAttribute("id","ag-item-btn-reverse-"+i),o.setAttribute("class","AgoraVideoCall-btn-reverse"),o.onclick=function(){return G((function(e){return 1-e}))},r.appendChild(o);var l=document.createElement("i");l.setAttribute("class","hb-icon-refresh-ccw"),o.appendChild(l),null===n||void 0===n||n.appendChild(r),e.play("ag-item-"+i)}t===F?(r.setAttribute("style","position:relative; grid-area: 1/1/5/5"),r.setAttribute("class","ag-item"),o.setAttribute("style","visibility: hidden")):(r.setAttribute("class","ag-item small"),r.setAttribute("style","position:relative; grid-area: span 1/span 1/".concat(5-a,"/5; z-index: 1; padding: 0 19px 17px 0")),o.setAttribute("style","visibility: visible"),a+=1),null===(c=e.player)||void 0===c||null===(s=c.resize)||void 0===s||s.call(c)}))}else if("tile"===w){var c=k.length;k.map((function(e,t){var a=e.getId(),s=document.querySelector("#ag-item-"+a);s||((s=document.createElement("section")).setAttribute("id","ag-item-"+a),s.setAttribute("class","ag-item"),null===n||void 0===n||n.appendChild(s),e.play("ag-item-"+a)),s.setAttribute("style","grid-area: ".concat(l.d[c][t])),e.player.resize&&e.player.resize()}))}null===(e=j.current)||void 0===e||e.setAudioVolume(0),null===(t=j.current)||void 0===t||t.setEffectsVolume(0)}();return Object(a.jsx)("div",{className:"hb-wrapper",children:Object(a.jsx)("div",{className:"wrapper meeting",children:Object(a.jsxs)("div",{className:"row AgoraVideoCall",children:[Object(a.jsx)("div",{className:"col-md-8",children:Object(a.jsxs)("div",{className:"ag-main",children:[Object(a.jsxs)("div",{className:"AgoraVideoCall-info",children:[Object(a.jsxs)("div",{className:"AgoraVideoCall-info-nurse",children:[Object(a.jsx)("img",{alt:"avatar",src:"https://petmaster.vn/petroom/wp-content/uploads/2020/03/cho-corgi-4.jpg",className:"AgoraVideoCall-info-nurse__avatar"}),Object(a.jsxs)("div",{className:"AgoraVideoCall-info-nurse__name",children:[Object(a.jsx)("h3",{children:"Pflegeberatung"}),Object(a.jsx)("span",{children:"Maxima Mustermann"})]})]}),Object(a.jsxs)("div",{className:"AgoraVideoCall-info-time",children:[Object(a.jsx)("div",{className:"AgoraVideoCall-info-time__ellipse"}),Object(a.jsx)("span",{children:"09:30"})]})]}),Object(a.jsx)("div",{className:"ag-container",children:Object(a.jsx)("div",{id:"ag-canvas",style:{display:"grid",gridGap:"10px",alignItems:"center",justifyItems:"center",gridTemplateRows:"repeat(4, auto)",gridTemplateColumns:"repeat(4, auto)"}})}),Object(a.jsxs)("div",{className:"AgoraVideoCall-btn-group",children:[Object(a.jsxs)("div",{className:"AgoraVideoCall-btn-group__left",children:[Object(a.jsx)(d.a,{className:"btn-toggle-camera",icon:"meeting-camera-2",title:"Turn on/off Camera",onClick:function(e){var t,n,a;e.currentTarget.classList.toggle("off"),(null===(t=j.current)||void 0===t?void 0:t.isVideoOn())?null===(n=j.current)||void 0===n||n.disableVideo():null===(a=j.current)||void 0===a||a.enableVideo()}}),Object(a.jsx)(d.a,{className:"btn-toggle-micro",icon:"meeting-mic-2",title:"Turn on/off Mic",onClick:function(e){var t,n;e.currentTarget.classList.toggle("off"),(null===(t=j.current)||void 0===t?void 0:t.isAudioOn())?j.current.disableAudio():null===(n=j.current)||void 0===n||n.enableAudio()}}),Object(a.jsx)(d.a,{className:"btn-toggle-volume",icon:"meeting-volume-high",title:"Volume"}),Object(a.jsx)(d.a,{icon:"arrows-expand",title:"Fullscreen"})]}),Object(a.jsx)(d.a,{icon:"call-decline",title:"Leave",isLeave:!0,disabled:!T,onClick:function(e){if(!e.currentTarget.classList.contains("disabled"))try{var t,n,a,c,s;if(null===(t=f.current)||void 0===t||t.unpublish(j),null===(n=j.current)||void 0===n||n.close(),q)null===(c=m.current)||void 0===c||c.unpublish(O),null===(s=O.current)||void 0===s||s.close();null===(a=f.current)||void 0===a||a.leave((function(){console.log("Client succeed to leave.")}),(function(){console.log("Client failed to leave.")}))}finally{V(!1),f.current=null,j.current=null,v()}}})]})]})}),Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsxs)("div",{className:"AgoraVideoCall-messages",children:[Object(a.jsx)("h3",{className:"AgoraVideoCall-messages__header",children:"Chat"}),Object(a.jsxs)("div",{className:"AgoraVideoCall-messages__body",children:[Object(a.jsx)("div",{children:R.map((function(e){return Object(a.jsxs)("div",{children:[e.uid,": ",e.message]})}))}),Object(a.jsx)(d.b,{onSubmit:function(e){var t;return null===(t=C.current)||void 0===t?void 0:t.sendChannelMessage(e)}})]})]})})]})})})}}).call(this,n(35))},858:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return i}));var a="8d7e950852c341c7b2050e83261bde49",c="0068d7e950852c341c7b2050e83261bde49IAAkvRCmrg8Sj4ACxWw647qgfIkBY9pG3TsWFnQKlE11qmAGdlZzmL49IgDPLF0BuOH3YAQAAQBInvZgAgBInvZgAwBInvZgBABInvZg",s="0068d7e950852c341c7b2050e83261bde49IABi55qfhg8hpfgPK10BF78vhwqmLpIVbmJoXLbdMcjm3sgVYfUAAAAAEADw+ZoDyeX3YAEA6ANZovZg",i={1:["span 12/span 24"],2:["span 12/span 12/13/25","span 12/span 12/13/13"],3:["span 6/span 12","span 6/span 12","span 6/span 12/7/19"],4:["span 6/span 12","span 6/span 12","span 6/span 12","span 6/span 12/7/13"],5:["span 3/span 4/13/9","span 3/span 4/13/13","span 3/span 4/13/17","span 3/span 4/13/21","span 9/span 16/10/21"],6:["span 3/span 4/13/7","span 3/span 4/13/11","span 3/span 4/13/15","span 3/span 4/13/19","span 3/span 4/13/23","span 9/span 16/10/21"],7:["span 3/span 4/13/5","span 3/span 4/13/9","span 3/span 4/13/13","span 3/span 4/13/17","span 3/span 4/13/21","span 3/span 4/13/25","span 9/span 16/10/21"]}},859:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(41),c=n.n(a),s=n(85),i=n(97),r=n(98),o=n(860),l=n.n(o),u=function(){function e(t,n,a,c,s){Object(i.a)(this,e),this.channels=void 0,this._logined=void 0,this.client=void 0,this.accountName=void 0,this.addMessage=void 0,this.channels={},this._logined=!1,this.accountName="",this.client=l.a.createInstance(t,{enableLogUpload:!1}),this.subscribeClientEvents(),this.joinChannel(a,n,c),this.addMessage=s}return Object(r.a)(e,[{key:"subscribeClientEvents",value:function(){["ConnectionStateChanged","MessageFromPeer"].forEach((function(e){}))}},{key:"subscribeChannelEvents",value:function(e){var t=this;["MemberJoined","MemberLeft"].forEach((function(n){t.channels[e].channel.on(n,(function(){for(var e=arguments.length,a=new Array(e),c=0;c<e;c++)a[c]=arguments[c];console.log("emit ",n,a),t.addMessage({uid:"System",message:a})}))})),this.channels[e].channel.on("ChannelMessage",(function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];console.log("emit ","ChannelMessage",n),t.addMessage({uid:n[1],message:n[0].text})}))}},{key:"login",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.accountName="HB-"+t,e.abrupt("return",this.client.login({uid:this.accountName,token:n}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.client.logout());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"joinChannel",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n,a){var s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.login(n,a);case 2:return s=this.client.createChannel(t),this.channels[t]={channel:s,joined:!1},this.subscribeChannelEvents(t),e.abrupt("return",s.join());case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"leaveChannel",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("leaveChannel",t),this.channels[t]&&(!this.channels[t]||this.channels[t].joined)){e.next=3;break}return e.abrupt("return");case 3:return e.abrupt("return",this.channels[t].channel.leave());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendChannelMessage",value:function(){var e=Object(s.a)(c.a.mark((function e(t){var n,a=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"test",this.addMessage({uid:this.accountName,message:t}),e.abrupt("return",this.channels[n].channel.sendMessage({text:t}));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendPeerMessage",value:function(){var e=Object(s.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("sendPeerMessage",t,n),e.abrupt("return",this.client.sendMessageToPeer({text:t},n.toString()));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"queryPeersOnlineStatus",value:function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("queryPeersOnlineStatus",t),e.abrupt("return",this.client.queryPeersOnlineStatus([t]));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()},861:function(e,t,n){},862:function(e,t,n){},863:function(e,t,n){},864:function(e,t,n){},865:function(e,t,n){}}]);
//# sourceMappingURL=17.83755e6a.chunk.js.map