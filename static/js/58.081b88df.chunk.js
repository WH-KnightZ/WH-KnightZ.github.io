(this["webpackJsonphb-frontend"]=this["webpackJsonphb-frontend"]||[]).push([[58],{1001:function(e,a,t){"use strict";t.r(a);var r=t(3),n=t(7),i=t(16),l=t(1),o=t(19),c=t(29),s=t(38),d=t(21),b=t(45),u=t(32),_=t(645),m=t.n(_),j=t(115),h=t(603),f=t(78),p=t.n(f),O=t(39),v=t(31),g=t(116),x=t.n(g),P=(t(194),t(602)),N=t(96),y=Object(l.forwardRef)((function(e,a){var t=e.onClick;return Object(r.jsx)("div",{className:m.a.iconDate,onClick:t,ref:a,children:Object(r.jsx)("i",{className:"hb-icon-calendar-date"})})})),w=function(){return h.b().shape({first_name:h.d().trim().required("First Name is required"),last_name:h.d().trim().required("Last Name is required")})};a.default=function(e){var a=Object(d.d)((function(e){return e.auth})),t=Object(O.h)(),_=Object(d.c)(),h=function(e,a){return _(Object(s.d)(e,a))},f=Object(l.useRef)(null),g=Object(l.useState)(null),B=Object(i.a)(g,2),C=B[0],D=B[1],T=Object(l.useState)({file_path:"",link:""}),k=Object(i.a)(T,2),G=k[0],W=k[1],M=Object(l.useState)({file:"",imagePreviewUrl:"",avatar:(null===a||void 0===a?void 0:a.avatar)||"",loading:!1}),J=Object(i.a)(M,2),U=J[0],A=J[1],S=Object(l.useState)(!1),F=Object(i.a)(S,2),E=F[0],L=F[1],V=Object(l.useState)(0),Y=Object(i.a)(V,2),q=Y[0],R=Y[1],z=Object(l.useState)(!1),I=Object(i.a)(z,2),Z=I[0],H=I[1],K=Object(l.useState)(null),Q=Object(i.a)(K,2),X=Q[0],$=Q[1],ee=Object(d.d)((function(e){return e.auth.group_name})),ae=Object(l.useState)(!1),te=Object(i.a)(ae,2),re=te[0],ne=te[1];Object(l.useEffect)((function(){h({method:"get",api:c.d.rest.getProfileUser(),loading:!0},(function(e){var a=e.data;if(e.status===s.c){var t=Object(u.h)(a.birth_date);D(Object(n.a)(Object(n.a)({},a),{},{birth_date:t})),R(a.gender),$(t)}}))}),[]);var ie=function(){ne(!re)},le=Object(l.useRef)(null);if(!C)return Object(r.jsx)("div",{});var oe="nurse"!==ee||3!==q&&X;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.j,{show:re,handleClose:ie,title:"Abbrechen",content:"Sind sie sicher, dass sie Abbrechen wollen? Alle \xc4nderungen gehen dabei verloren.",up:"Ja, abbrechen",upCallback:function(){le.current.resetForm(),L(!1),ne(!1)},down:"Weiter bearbeiten",downCallback:ie}),Object(r.jsxs)("div",{className:"wide ".concat(m.a.profileWrapper),children:[Object(r.jsx)("h1",{className:m.a.title,children:"Profil"}),Object(r.jsxs)(o.I,{className:m.a.profileContainer,children:[Object(r.jsx)(o.j,{md:4,children:Object(r.jsxs)("div",{className:m.a.leftWrapper,children:[Object(r.jsx)("h2",{className:m.a.userName,children:"".concat(C.first_name,"\n").concat(C.last_name)}),Object(r.jsxs)("div",{className:m.a.avatarArea,children:[Object(r.jsx)(N.n,{backgroundImage:(U.imagePreviewUrl?U.avatar||U.imagePreviewUrl:C.avatar_thumbnail)||v.c,className:m.a.avatarUser,children:Object(r.jsx)("div",{className:m.a.overlay,style:{backgroundColor:U.loading?"#fff4":"transparent"},children:Object(r.jsx)("div",{className:m.a.avatarLoading,children:U.loading?Object(r.jsx)(o.M,{style:{color:"var(--aquamarin-100)",borderWidth:4},size:"lg"}):""})})}),Object(r.jsx)(j.a,{className:m.a.avatarUserButtonWrapper,btnClassName:m.a.avatarUserButton,onClick:function(){var e;null===(e=f.current)||void 0===e||e.click(),h({method:"get",api:c.d.rest.getUploadLink("image")},(function(e){e.status===s.c&&W((null===e||void 0===e?void 0:e.data)||{})}))},color:"petrol",children:"Foto aktualisieren"}),Object(r.jsx)("input",{className:"avatar-user--input",type:"file",id:"myFile",name:"filename",ref:f,style:{display:"none"},accept:"image/x-png,image/gif,image/jpeg",onChange:function(e){var a=new FileReader,t=e.target.files[0];t&&(a.onload=function(){W({file_path:t}),A({file:t,imagePreviewUrl:a.result,loading:!0}),function(e,a){var t=new Headers;t.append("x-amz-acl","public-read");var r=a;U.loading=!0,fetch(e,{method:"PUT",headers:t,body:r,redirect:"follow"}).then((function(e){return e.text()})).then((function(e){console.log(e),Object(u.c)({avatar:null===G||void 0===G?void 0:G.avatar}),A((function(e){return Object(n.a)(Object(n.a)({},e),{},{loading:!1})})),_(Object(b.l)({avatar:null===G||void 0===G?void 0:G.avatar})),U.loading=!1})).catch((function(e){return console.log("error",e)}))}(G.link,t)},a.readAsDataURL(t))}})]})]})}),Object(r.jsx)(o.j,{md:8,children:Object(r.jsx)(o.e,{className:"hb-card ".concat(m.a.formContainer),children:Object(r.jsx)(o.f,{className:"hb-card-item",style:{marginBottom:0},children:Object(r.jsx)(P.c,{innerRef:le,initialValues:C,enableReinitialize:!0,validate:Object(u.A)(w),onSubmit:function(e){var a=X?Object(u.j)(X):void 0,t={gender:q,phone_number:e.phone_number,first_name:e.first_name.trim(),last_name:e.last_name.trim(),birth_date:a,bio:e.bio};H(!0),h({method:"put",api:c.d.rest.editProfile(),body:t,msg:c.d.messages.updateMessageFailure},(function(r){var i=r.status;H(!1),i===s.c&&(L(!1),D((function(r){var i={gender:q,phone_number:e.phone_number,first_name:e.first_name.trim(),last_name:e.last_name.trim(),birth_date:a};return Object(u.c)(i),_(Object(b.l)(i)),Object(n.a)(Object(n.a)(Object(n.a)({},r),t),{},{birth_date:X})})))}))},children:function(e){var a=e.values,n=e.errors,i=e.dirty,l=e.handleChange,s=e.handleBlur,d=e.handleSubmit,b=e.isValid;return Object(r.jsxs)(o.q,{className:m.a.form,onSubmit:d,children:[Object(r.jsx)(o.r,{className:m.a.noMarginBottom,children:Object(r.jsxs)("div",{className:"".concat(m.a.wrapperTitle," ").concat(E&&m.a.edit),children:[Object(r.jsx)("h2",{className:m.a.cardTitle,children:"Pers\xf6nliche Daten"}),Object(r.jsx)(j.a,{btnClassName:m.a.btnSubmit,className:m.a.wrapperBtn,onClick:function(){L(!0),le.current.resetForm(),R(C.gender),$(C.birth_date)},type:"button",style:{display:E?"none":"flex"},children:"Daten bearbeiten"})]})}),!E&&Object(r.jsxs)(o.r,{className:"".concat(m.a.bioWrapper),children:[C.bio?Object(r.jsxs)(o.e,{className:m.a.modalBody,children:[Object(r.jsxs)(o.i,{className:m.a.modalBioTitle,children:[Object(r.jsx)("h4",{children:"Biografie"}),Object(r.jsx)("i",{className:"hb-icon-pentool-2"})]}),Object(r.jsxs)(o.f,{className:m.a.mobdalBioBody,children:[C.bio,Object(r.jsx)(j.a,{btnClassName:m.a.btnEdit,className:m.a.wrapperBtn,onClick:function(){return t.push("/update-bio")},type:"button",children:"Bearbeiten"})]})]}):Object(r.jsxs)("div",{className:m.a.btnNurse,onClick:function(){return t.push("/update-bio")},children:[Object(r.jsxs)("div",{className:m.a.contentNurse,children:[Object(r.jsx)("div",{className:m.a.uploadDocument,children:Object(r.jsx)("i",{className:"hb-icon-book"})}),Object(r.jsx)("span",{children:"Biografie hinzuf\xfcgen"})]}),Object(r.jsx)("div",{className:m.a.iconArrowNurse,children:Object(r.jsx)("i",{className:"hb-icon-arrow-right"})})]}),Object(r.jsx)(o.A,{children:n.bio||""})]}),Object(r.jsxs)(o.r,{className:m.a.genderGroup,children:[Object(r.jsxs)("div",{className:m.a.label,style:{display:3===C.gender?"none":"block"},children:["Geschlecht",E&&"nurse"===ee&&"*"]}),E?Object(r.jsxs)("div",{className:m.a.gender,children:[Object(r.jsx)(j.e,{type:"button",color:"petrol",onClick:function(){return R(1)},className:"".concat(m.a.btnGender," ").concat(1===q?"is-selected":""),children:"Weiblich"}),Object(r.jsx)(j.e,{type:"button",color:"petrol",onClick:function(){return R(0)},className:"".concat(m.a.btnGender," ").concat(0===q?"is-selected":""),children:"M\xe4nnlich"}),Object(r.jsx)(j.e,{type:"button",color:"petrol",onClick:function(){return R(2)},className:"".concat(m.a.btnGender," ").concat(2===q?"is-selected":""),children:"Andere"})]}):Object(r.jsx)(j.e,{disabled:!0,light:!0,type:"button",style:{display:3===C.gender?"none":"block"},children:0===C.gender?"M\xe4nnlich":1===C.gender?"Weiblich":"Andere"})]}),Object(r.jsxs)(o.r,{className:[m.a.formGroup,m.a.email],children:[Object(r.jsx)("div",{className:m.a.label,children:"Email"}),Object(r.jsx)(j.f,{color:"gray",placeholder:"E-Mail",autoComplete:"email",name:"email",maxLength:50,value:a.email,onBlur:s,onChange:function(e){e.target.value.includes(" ")||l(e)},disabled:!0})]}),Object(r.jsxs)(o.r,{className:[m.a.formGroup,m.a.dataOfBirth],children:[Object(r.jsxs)("div",{className:m.a.label,children:["Geburtstag",E&&"nurse"===ee&&"*"]}),E?Object(r.jsxs)("div",{className:m.a.date,children:[Object(r.jsx)("div",{className:E?m.a.valueDate:m.a.valueDateDisable,style:{color:X?"var(--petrol-100)":"var(--nightblue-50)"},children:X?p()(X||C.birth_date).format("DD.MM.YYYY"):"TT.MM.JJJJ"}),Object(r.jsx)("div",{style:{width:50},className:"hb-datepicker",children:Object(r.jsx)(x.a,{selected:X,customInput:Object(r.jsx)(y,{}),onChange:function(e){return $(e)},yearDropdownItemNumber:40,showYearDropdown:!0,showMonthDropdown:!0,scrollableYearDropdown:!0,adjustDateOnChange:!0,maxDate:Object(u.l)(),popperPlacement:"bottom-end",disabled:!E})})]}):Object(r.jsx)(o.u,{placeholder:"TT.MM.JJJJ",autoComplete:"birth_date",name:"birth_date",value:C.birth_date?p()(C.birth_date).format("DD.MM.YYYY")||"":"TT.MM.JJJJ",onBlur:s,onChange:function(e){e.target.value.includes(" ")||l(e)},className:m.a.inputText,disabled:!0,style:{color:C.birth_date?"var(--petrol-100)":"var(--nightblue-50)"}}),Object(r.jsx)(o.A,{children:n.birth_date||""})]}),Object(r.jsxs)(o.r,{className:[E?m.a.formGroup:"",m.a.phone],children:[Object(r.jsx)("div",{className:m.a.label,children:"Telefonnummer"}),Object(r.jsx)(j.f,{color:"gray",placeholder:"Telefonnummer",autoComplete:"phone_number",invalid:""!==a.phone_number&&!!n.phone_number,name:"phone_number",value:a.phone_number||"",onBlur:s,onChange:function(e){e.target.value&&!c.d.validate.valueTypingExpressionsPhone(e)||l(e)},maxLength:20,disabled:!E,error:null===n||void 0===n?void 0:n.phone_number})]}),E&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(o.r,{className:m.a.formGroup,children:[Object(r.jsx)("div",{className:m.a.label,children:"Vorname*"}),Object(r.jsx)(j.f,{color:"gray",placeholder:"Vorname",invalid:""!==a.first_name.trim()&&!!n.first_name,autoComplete:"first_name",maxLength:50,value:Object(u.e)(a.first_name||""),onBlur:s,onChange:function(e){c.d.validate.valueTypingExpressionsName(e)&&l(e)},name:"first_name",required:!0,disabled:!E,error:null===n||void 0===n?void 0:n.first_name})]}),Object(r.jsxs)(o.r,{children:[Object(r.jsx)("div",{className:m.a.label,children:"Nachname*"}),Object(r.jsx)(j.f,{color:"gray",placeholder:"Nachname",invalid:""!==a.last_name.trim()&&!!n.last_name,autoComplete:"last_name",maxLength:50,value:Object(u.e)(a.last_name||""),onBlur:s,onChange:function(e){c.d.validate.valueTypingExpressionsName(e)&&l(e)},name:"last_name",required:!0,disabled:!E,error:null===n||void 0===n?void 0:n.last_name})]}),Object(r.jsxs)("div",{className:m.a.btnGroupWrap,children:[Object(r.jsx)("div",{style:{width:124,height:51},children:Object(r.jsx)(j.c,{type:"button",outline:!0,onClick:function(){i||q!==C.gender||X!==C.birth_date?ne(!0):L(!1)},children:"Abbrechen"})}),Object(r.jsx)("div",{style:{width:124,height:51},children:Object(r.jsx)(j.c,{type:"submit",disabled:!b||!oe||Z||!i&&q===C.gender&&X===C.birth_date,children:Z?Object(r.jsx)(o.M,{color:"light",size:"sm"}):"Speichern"})})]})]})]})}})})})})]})]})]})}},645:function(e,a,t){e.exports={profileWrapper:"Profile_profileWrapper__rJ2X1",profileContainer:"Profile_profileContainer__3wF2h",title:"Profile_title__Z47aD",bioTitle:"Profile_bioTitle__3ucFV",leftWrapper:"Profile_leftWrapper__3Y16p",userName:"Profile_userName__2wo_e",avatarArea:"Profile_avatarArea__1KP-w",avatarUser:"Profile_avatarUser__3LXjW",overlay:"Profile_overlay__GczcO",avatarUserButtonWrapper:"Profile_avatarUserButtonWrapper__obEk8",avatarUserButton:"Profile_avatarUserButton__1BG9z",formContainer:"Profile_formContainer__FqNPd",form:"Profile_form__1V8TH",noMarginBottom:"Profile_noMarginBottom__3rG-N",formGroup:"Profile_formGroup__24ca1",wrapperTitle:"Profile_wrapperTitle__3VZfa",cardTitle:"Profile_cardTitle__2sNR-",edit:"Profile_edit__1enav",wrapperBtn:"Profile_wrapperBtn__30Mmj",btnSubmit:"Profile_btnSubmit__1fqEK",genderGroup:"Profile_genderGroup__2PvMZ",btnNurse:"Profile_btnNurse__kE6_a",contentNurse:"Profile_contentNurse__2EjQr",uploadDocument:"Profile_uploadDocument__1-knE",iconArrowNurse:"Profile_iconArrowNurse__1S1vJ",modalBody:"Profile_modalBody__3o0OP",modalBioTitle:"Profile_modalBioTitle__gQOGj",mobdalBioBody:"Profile_mobdalBioBody__2unur",btnEdit:"Profile_btnEdit__2APe1",gender:"Profile_gender__3uTtV",btnGender:"Profile_btnGender__32_RF",inputText:"Profile_inputText__3sJ_v",label:"Profile_label__35fsf",dataOfBirth:"Profile_dataOfBirth__3oPMn",date:"Profile_date__3VIeD",valueDate:"Profile_valueDate__WB-QW",valueDateDisable:"Profile_valueDateDisable__3hVJD",iconDate:"Profile_iconDate__n0_jC",changePasswordUser:"Profile_changePasswordUser__1Kv0m",cardWrapper:"Profile_cardWrapper__2bc3n",cardBody:"Profile_cardBody__14zzG",inputPassword:"Profile_inputPassword__nLfcv",inputTextPassword:"Profile_inputTextPassword__1cjGu",iconPassword:"Profile_iconPassword__8Z-Gv",invalidFeedBack:"Profile_invalidFeedBack__7_crA",submit:"Profile_submit__3T48T",bioContainer:"Profile_bioContainer__30P8I",bioButton:"Profile_bioButton__3eVRF",bioWrapper:"Profile_bioWrapper__D4L0N",bio:"Profile_bio__2-1-C",btnWrapper:"Profile_btnWrapper__HJ7yL",btnGroupWrap:"Profile_btnGroupWrap__2Pcfh"}}}]);
//# sourceMappingURL=58.081b88df.chunk.js.map