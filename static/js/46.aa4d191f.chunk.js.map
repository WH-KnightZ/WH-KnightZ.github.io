{"version":3,"sources":["views/user/consulting/AddFriendMainPage.tsx","views/user/mobility/Frame.tsx","views/user/consulting/FriendItem.tsx"],"names":["AddFriendMainPage","dispatch","useDispatch","callApi","payload","callback","callApiAction","useState","data","loading","full","page","friends","setFriends","searchName","setSearchName","show","top","left","friendId","title","menuPopup","setMenuPopup","popupCancel","setPopupCancel","getListFriend","method","api","config","rest","getListUsers","response","status","SUCCESS","length","useEffect","searchParams","className","searchEmpty","callbackSearch","searchValue","validate","valueTypingExpressionsName","inputStyle","width","handleOpenPopup","e","bound","target","getBoundingClientRect","window","scrollY","scrollX","handleClosePopup","style","margin","padding","display","justifyContent","alignItems","zIndex","listStyle","paddingLeft","marginBottom","placeholder","to","handleClose","items","id","label","icon","handle","isVisible","content","leftButtonText","rightButtonText","leftButtonOnPress","rightButtonOnPress","userId","deleteFriend","filter","friend","console","log","textAlign","map","md","marginTop","first_name","last_name","img","avatar","changeStatus","handleOpen","search","size","render","loadingSmall","onEnter","mappingSize","large","medium","small","Frame","props","height","FriendItem","setPopUpCancel","setPopupRequestCancel","history","useHistory","success","setSuccess","borderRadius","border","cursor","onClick","push","src","alt","marginLeft","color","variant","checkStatus"],"mappings":"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","file":"static/js/46.aa4d191f.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { CCol, CContainer, CHeader, CRow } from '@coreui/react';\nimport { RouteComponentProps } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport config from '../../../config';\nimport Search from '../../../components/search/Search';\nimport { Waypoint } from 'react-waypoint';\nimport { loadingSmall } from '../../../extensions';\nimport Frame from '../mobility/Frame';\nimport FriendItem from './FriendItem';\nimport { ConfirmPopup, MenuPopup } from '../../../components';\n\nconst AddFriendMainPage: React.FC<RouteComponentProps> = () => {\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback?: (result: any) => void) => dispatch(callApiAction(payload, callback));\n  const [friends, setFriends] = useState({ data: [], loading: true, full: false, page: 0 });\n  const [searchName, setSearchName] = useState('');\n  const pageSize = 10;\n  const [menuPopup, setMenuPopup] = useState<any>({ show: false, top: 0, left: 0, friendId: '', title: '' });\n  const [popupCancel, setPopupCancel] = useState({ show: false });\n\n  const getListFriend = (searchName: any, page: any) => {\n    callApi(\n      {\n        method: 'get',\n        api: config.rest.getListUsers(searchName, page, pageSize),\n        loading: page === 1,\n      },\n      (response) => {\n        const { data, status } = response;\n        if (status === SUCCESS) {\n          setFriends({\n            data: page === 1 ? data.friends : [...friends.data, ...data.friends],\n            full: data.friends.length < pageSize,\n            loading: false,\n            page: page,\n          });\n        }\n      },\n    );\n  };\n\n  useEffect(() => {\n    getListFriend(searchName, 1);\n  }, []);\n\n  const loadMoreFriends = () => {\n    if (friends.loading || friends.full) return;\n    setFriends({ ...friends, loading: true });\n    getListFriend(searchName, friends.page + 1);\n  };\n\n  const searchParams: any = {\n    className: 'header-topic--wrapper__search--selection__world',\n    searchName,\n    setSearchName,\n    searchEmpty: true,\n    callbackSearch: (searchValue: string) => getListFriend(searchValue, 1),\n    validate: config.validate.valueTypingExpressionsName,\n    inputStyle: { width: 400 },\n  };\n  const unFriend = (userId: any, page: any) => {\n    callApi(\n      {\n        method: 'delete',\n        api: config.rest.deleteFriend(userId),\n        loading: true,\n      },\n      (response) => {\n        const { status } = response;\n        if (status === SUCCESS) {\n          setFriends((friends: any) => ({\n            ...friends,\n            data: friends.data.filter((friend: any) => friend.id !== userId),\n          }));\n        }\n      },\n    );\n  };\n\n  const handleCancel = () => {\n    setPopupCancel({ show: false });\n    unFriend(menuPopup.id, 1);\n    console.log('Cancel ' + menuPopup.id);\n  };\n\n  const handleOpenPopup = (e: any, data: any) => {\n    const bound = e.target.getBoundingClientRect();\n    let offsetLeft = 120;\n    let width = 160;\n\n    setMenuPopup({\n      show: true,\n      top: bound.top + window.scrollY + 10,\n      left: bound.left - offsetLeft + window.scrollX + 140,\n      width: width,\n      ...data,\n    });\n  };\n\n  const handleClosePopup = () => {\n    setMenuPopup((menuPopup: any) => {\n      return { ...menuPopup, show: false };\n    });\n  };\n\n  return (\n    <div className=\"add-friend-main-page\" style={{ margin: '0 150px' }}>\n      <CContainer>\n        <div className=\"add-friend-page-wrapper\">\n          <CHeader\n            style={{ padding: 10, display: 'flex', justifyContent: 'space-between', alignItems: 'center', zIndex: 1 }}\n          >\n            <h4>Friends</h4>\n            <div style={{ width: 650 }}>\n              <ul\n                style={{\n                  listStyle: 'none',\n                  display: 'flex',\n                  paddingLeft: 0,\n                  justifyContent: 'space-between',\n                  marginBottom: 0,\n                  alignItems: 'center',\n                }}\n              >\n                <li>\n                  <Search {...searchParams} className=\"add-friend__search\" placeholder=\"Search friend\" />\n                </li>\n                <li>\n                  <Link to=\"/consulting/friend-request\">Friend Requests</Link>\n                </li>\n                <li>\n                  <Link to=\"/consulting/search-friend\">Search Friend</Link>\n                </li>\n              </ul>\n            </div>\n          </CHeader>\n          <div className=\"add-friend-main-page-body\">\n            <MenuPopup\n              {...menuPopup}\n              handleClose={handleClosePopup}\n              items={[\n                {\n                  id: 'edit',\n                  label: 'Unfriend',\n                  icon: 'fas fa-user-alt-slash',\n                  handle: () => setPopupCancel({ show: true }),\n                },\n\n                {\n                  id: 'cancel',\n                  label: 'Cancel',\n                  icon: 'fas fa-trash',\n                  handle: () => setMenuPopup({ show: false }),\n                },\n              ]}\n            />\n            <ConfirmPopup\n              isVisible={popupCancel.show}\n              title=\"Cancel\"\n              content=\"Are you sure you want to unfriend?\"\n              leftButtonText=\"No\"\n              rightButtonText=\"Yes\"\n              leftButtonOnPress={() => setPopupCancel({ show: false })}\n              rightButtonOnPress={handleCancel}\n            />\n            <CRow>\n              {friends.data.length === 0 ? (\n                <div style={{ width: 100 + '%', textAlign: 'center' }}>No result</div>\n              ) : (\n                friends.data.map((friend: any) => (\n                  <CCol md={6} style={{ marginTop: '15px' }}>\n                    <FriendItem\n                      first_name={friend.first_name}\n                      last_name={friend.last_name}\n                      img={friend.avatar}\n                      id={friend.id}\n                      changeStatus={null}\n                      status=\"friend\"\n                      menuPopup={menuPopup}\n                      handleOpen={handleOpenPopup}\n                      handleClose={handleClosePopup}\n                      search={false}\n                    />\n                  </CCol>\n                ))\n              )}\n            </CRow>\n          </div>\n          {friends.page !== 0 && friends.loading && <Frame size=\"large\" render={loadingSmall} />}\n          <Waypoint onEnter={loadMoreFriends} />\n        </div>\n      </CContainer>\n    </div>\n  );\n};\n\nexport default AddFriendMainPage;\n","import React from 'react';\n\ninterface Props {\n  size: 'large' | 'medium' | 'small';\n  render: any;\n}\n\nconst mappingSize = { large: 80, medium: 48, small: 36 };\n\nconst Frame: React.FC<Props> = (props) => {\n  const { size, render } = props;\n\n  return (\n    <div className=\"video-comments--comment\">\n      <div style={{ width: '100%', height: mappingSize[size] }}>{render}</div>\n    </div>\n  );\n};\n\nexport default Frame;\n","import React, { useState } from 'react';\nimport { CButton, CImg } from '@coreui/react';\nimport { useHistory } from 'react-router';\n\ninterface Props {\n  first_name: string;\n  last_name: string;\n  img: any;\n  id: any;\n  changeStatus?: any;\n  status?: 'friend' | 'confirm' | 'cancel' | null;\n  menuPopup?: any;\n  handleOpen?: any;\n  handleClose?: any;\n  search?: any;\n  setPopUpCancel?: any;\n  setPopupRequestCancel?: any;\n}\n\nconst FriendItem: React.FC<Props> = (props) => {\n  const {\n    first_name,\n    last_name,\n    img,\n    id,\n    changeStatus,\n    status,\n    handleOpen,\n    search,\n    setPopUpCancel,\n    setPopupRequestCancel,\n  } = props;\n  const history = useHistory();\n  const [success, setSuccess] = useState('');\n\n  const checkStatus = (status: any, search: any) => {\n    if (status === 'friend') {\n      if (search === false)\n        return (\n          <div onClick={(e) => handleOpen(e, { id })}>\n            <i className=\"fas fa-ellipsis-h\"></i>\n          </div>\n        );\n\n      return (\n        <div>\n          <CButton\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              setPopUpCancel({ show: true });\n            }}\n          >\n            Unfriend\n          </CButton>\n          <CButton\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              console.log('123');\n              // history.push('/consulting/add-friend');\n            }}\n          >\n            <i className=\"fas fa-phone\"></i> Call\n          </CButton>\n        </div>\n      );\n    }\n\n    if (status === 'confirm') {\n      // Request removed\n      if (success !== '') return <div>{success}</div>;\n      return (\n        <div style={{ width: 150, display: 'flex', justifyContent: 'space-between' }}>\n          <CButton\n            id=\"btn_delete\"\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              changeStatus(id, 'cancel');\n              setSuccess('Request removed');\n            }}\n          >\n            Delete\n          </CButton>\n          <CButton\n            id=\"btn_confirm\"\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              changeStatus(id, 'confirm');\n              setSuccess('Request accepted');\n            }}\n          >\n            Confirm\n          </CButton>\n        </div>\n      );\n    }\n    if (status === 'cancel') {\n      return (\n        <CButton color=\"primary\" variant=\"outline\" onClick={() => setPopupRequestCancel({ show: true })}>\n          Cancel request\n        </CButton>\n      );\n    }\n\n    return (\n      <CButton color=\"primary\" variant=\"outline\" onClick={() => changeStatus(id, null)}>\n        Add friend\n      </CButton>\n    );\n  };\n\n  return (\n    <div>\n      <div\n        className=\"friend-request-main-page-body--wrapper\"\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          borderRadius: 7,\n          border: '1px solid ',\n          padding: 8,\n        }}\n      >\n        <div\n          className=\"friend-request-main-page-body--information\"\n          style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', cursor: 'pointer' }}\n          onClick={() => history.push(`/consulting/information/${id}`)}\n        >\n          <CImg\n            src={img || 'https://i.stack.imgur.com/l60Hf.png'}\n            alt=\"Avatar\"\n            width={80}\n            height={80}\n            style={{ borderRadius: 10 }}\n          />\n          <h4 style={{ marginLeft: 20 }}>\n            {first_name} {last_name}\n          </h4>\n        </div>\n        <div className=\"friend-request-main-page-body--config\">{checkStatus(status, search)}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default FriendItem;\n"],"sourceRoot":""}