{"version":3,"sources":["views/user/personalInformation/ChangePassword.tsx","views/user/personalInformation/Profile.module.scss"],"names":["initialValues","old_password","password","passwordConfirmation","PASSWORD_MUST_AT_LEAST","PASSWORD_NEW_MUST_AT_LEAST","validationSchema","values","Yup","shape","min","required","matches","config","validate","validatePassword","oneOf","ChangePassword","useState","loading","setLoading","access_token","useSelector","state","auth","show","setShow","dispatch","useDispatch","history","useHistory","className","title","content","up","upCallback","push","signOut","hideCloseBtn","styles","changePasswordUser","bioContainer","bioTitle","cardWrapper","cardBody","onSubmit","payload","callback","newData","new_password","method","api","rest","body","enableLoading","msg","messages","forceChangePasswordFailure","token","response","status","id","SUCCESS","callApiAction","errors","dirty","handleChange","handleBlur","handleSubmit","isValid","label","color","type","placeholder","invalid","autoComplete","maxLength","value","onBlur","onChange","e","target","includes","name","error","inputPassword","children","size","disabled","btnClassName","submit","style","width","module","exports"],"mappings":"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","file":"static/js/56.5d4657f1.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport { CCard, CCardBody, CCardGroup, CContainer, CForm, CSpinner, CLabel } from '@coreui/react';\nimport { Formik } from 'formik';\nimport * as Yup from 'yup';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport config from '../../../config';\nimport { RouteComponentProps, useHistory } from 'react-router-dom';\nimport { validate } from '../../../utils';\nimport { HBButton, HBModalConfirm, HBFocusInput } from 'hbBaseClass';\nimport { signOut } from 'store/auth/actions';\nimport styles from './Profile.module.scss';\n\nconst initialValues = {\n  old_password: '',\n  password: '',\n  passwordConfirmation: '',\n};\n\nconst PASSWORD_MUST_AT_LEAST = 'Ihr Passwort muss mindestens 8 Zeichen, eine Buchstabe und eine Zahl enthalten.';\nconst PASSWORD_NEW_MUST_AT_LEAST =\n  'Ihr neues Passwort muss mindestens 8 Zeichen, eine Buchstabe und eine Zahl enthalten.';\nconst PASSWORD_MUST_MATCH = 'Passwort bestätigen stimmt nicht mit neuem Passwort überein.';\n\nconst validationSchema = function (values: any) {\n  return Yup.object().shape({\n    old_password: Yup.string()\n      .min(8, PASSWORD_MUST_AT_LEAST)\n      .required(PASSWORD_MUST_AT_LEAST)\n      .matches(config.validate.validatePassword(), PASSWORD_MUST_AT_LEAST),\n    password: Yup.string()\n      .min(8, PASSWORD_NEW_MUST_AT_LEAST)\n      .required(PASSWORD_NEW_MUST_AT_LEAST)\n      .matches(config.validate.validatePassword(), PASSWORD_NEW_MUST_AT_LEAST),\n    passwordConfirmation: Yup.string()\n      .required(PASSWORD_NEW_MUST_AT_LEAST)\n      .oneOf([Yup.ref('password'), null], PASSWORD_MUST_MATCH)\n      .matches(config.validate.validatePassword(), PASSWORD_NEW_MUST_AT_LEAST),\n  });\n};\n\nconst ChangePassword: React.FC<RouteComponentProps> = () => {\n  const [loading, setLoading] = useState(false);\n  const callApi = (payload: any, callback: any) => dispatch(callApiAction(payload, callback));\n  const access_token = useSelector((state: any) => state.auth.access_token);\n\n  const [show, setShow] = useState(false);\n\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  /**\n   * Move to login and clear localStorage\n   */\n  const handleBackLogin = () => {\n    history.push('/sign-in');\n    dispatch(signOut());\n  };\n\n  const onSubmit = (values: any) => {\n    const newData = {\n      old_password: values.old_password,\n      new_password: values.password,\n    };\n    setLoading(true);\n    callApi(\n      {\n        method: 'put',\n        api: config.rest.changePasswordUser(),\n        body: newData,\n        enableLoading: true,\n        msg: config.messages.forceChangePasswordFailure,\n        token: access_token,\n      },\n      (response: any) => {\n        const { status, id } = response;\n        setLoading(false);\n\n        if (status === SUCCESS) {\n          if (id === '40') {\n            setShow(true);\n          }\n        }\n      },\n    );\n  };\n\n  return (\n    <div className=\"hb-user\">\n      <HBModalConfirm\n        show={show}\n        title=\"Passwort erfolgreich geändert\"\n        content=\"Ihr Passwort wurde erfolgreich geändert, Sie können sich nun mit dem neuen Passwort anmelden.\"\n        up=\"Zum Login\"\n        upCallback={() => handleBackLogin()}\n        hideCloseBtn\n      />\n      <div className={styles.changePasswordUser}>\n        <CContainer className={styles.bioContainer}>\n          <div className={`hb-title ${styles.title} ${styles.bioTitle}`}>Passwort ändern</div>\n          <CCardGroup>\n            <CCard className={styles.cardWrapper}>\n              <CCardBody className={styles.cardBody}>\n                <Formik initialValues={initialValues} validate={validate(validationSchema)} onSubmit={onSubmit}>\n                  {({ values, errors, dirty, handleChange, handleBlur, handleSubmit, isValid }) => (\n                    <CForm onSubmit={handleSubmit}>\n                      <CLabel className={styles.label}>Altes Passwort</CLabel>\n                      <HBFocusInput\n                        color=\"white\"\n                        type=\"password\"\n                        placeholder=\"Altes Passwort\"\n                        invalid={values.old_password !== '' && !!errors.old_password}\n                        autoComplete=\"current-password\"\n                        maxLength={16}\n                        value={values.old_password}\n                        onBlur={handleBlur}\n                        onChange={(e) => {\n                          if (!e.target.value.includes(' ')) handleChange(e);\n                        }}\n                        name=\"old_password\"\n                        error={errors?.old_password}\n                        className={styles.inputPassword}\n                      />\n\n                      <CLabel className={styles.label}>Neues Passwort</CLabel>\n                      <HBFocusInput\n                        color=\"white\"\n                        type=\"password\"\n                        placeholder=\"Neues Passwort\"\n                        invalid={values.password !== '' && !!errors.password}\n                        autoComplete=\"current-password\"\n                        maxLength={16}\n                        value={values.password}\n                        onBlur={handleBlur}\n                        onChange={(e) => {\n                          if (!e.target.value.includes(' ')) handleChange(e);\n                        }}\n                        name=\"password\"\n                        error={errors?.password}\n                        className={styles.inputPassword}\n                      />\n\n                      <CLabel className={styles.label}>Neues Passwort wiederholen</CLabel>\n                      <HBFocusInput\n                        color=\"white\"\n                        type=\"password\"\n                        placeholder=\"Neues Passwort wiederholen\"\n                        invalid={values.passwordConfirmation !== '' && !!errors.passwordConfirmation}\n                        autoComplete=\"current-password\"\n                        maxLength={16}\n                        value={values.passwordConfirmation}\n                        onBlur={handleBlur}\n                        onChange={(e) => {\n                          if (!e.target.value.includes(' ')) handleChange(e);\n                        }}\n                        name=\"passwordConfirmation\"\n                        error={errors?.passwordConfirmation}\n                        className=\"mb-0\"\n                      />\n                      <div>\n                        <HBButton\n                          color=\"petrol\"\n                          children={loading ? <CSpinner size=\"sm\" color=\"light\" /> : 'Passwort aktualisieren'}\n                          disabled={!(isValid && dirty && !loading)}\n                          btnClassName={styles.submit}\n                          style={{ width: 236 }}\n                        />\n                      </div>\n                    </CForm>\n                  )}\n                </Formik>\n              </CCardBody>\n            </CCard>\n          </CCardGroup>\n        </CContainer>\n      </div>\n    </div>\n  );\n};\n\nexport default ChangePassword;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profileWrapper\":\"Profile_profileWrapper__rJ2X1\",\"profileContainer\":\"Profile_profileContainer__3wF2h\",\"title\":\"Profile_title__Z47aD\",\"bioTitle\":\"Profile_bioTitle__3ucFV\",\"leftWrapper\":\"Profile_leftWrapper__3Y16p\",\"userName\":\"Profile_userName__2wo_e\",\"avatarArea\":\"Profile_avatarArea__1KP-w\",\"avatarUser\":\"Profile_avatarUser__3LXjW\",\"overlay\":\"Profile_overlay__GczcO\",\"avatarUserButtonWrapper\":\"Profile_avatarUserButtonWrapper__obEk8\",\"avatarUserButton\":\"Profile_avatarUserButton__1BG9z\",\"formContainer\":\"Profile_formContainer__FqNPd\",\"form\":\"Profile_form__1V8TH\",\"noMarginBottom\":\"Profile_noMarginBottom__3rG-N\",\"formGroup\":\"Profile_formGroup__24ca1\",\"wrapperTitle\":\"Profile_wrapperTitle__3VZfa\",\"cardTitle\":\"Profile_cardTitle__2sNR-\",\"edit\":\"Profile_edit__1enav\",\"wrapperBtn\":\"Profile_wrapperBtn__30Mmj\",\"btnSubmit\":\"Profile_btnSubmit__1fqEK\",\"genderGroup\":\"Profile_genderGroup__2PvMZ\",\"btnNurse\":\"Profile_btnNurse__kE6_a\",\"contentNurse\":\"Profile_contentNurse__2EjQr\",\"uploadDocument\":\"Profile_uploadDocument__1-knE\",\"iconArrowNurse\":\"Profile_iconArrowNurse__1S1vJ\",\"modalBody\":\"Profile_modalBody__3o0OP\",\"modalBioTitle\":\"Profile_modalBioTitle__gQOGj\",\"mobdalBioBody\":\"Profile_mobdalBioBody__2unur\",\"btnEdit\":\"Profile_btnEdit__2APe1\",\"gender\":\"Profile_gender__3uTtV\",\"btnGender\":\"Profile_btnGender__32_RF\",\"inputText\":\"Profile_inputText__3sJ_v\",\"label\":\"Profile_label__35fsf\",\"dataOfBirth\":\"Profile_dataOfBirth__3oPMn\",\"date\":\"Profile_date__3VIeD\",\"valueDate\":\"Profile_valueDate__WB-QW\",\"valueDateDisable\":\"Profile_valueDateDisable__3hVJD\",\"iconDate\":\"Profile_iconDate__n0_jC\",\"changePasswordUser\":\"Profile_changePasswordUser__1Kv0m\",\"cardWrapper\":\"Profile_cardWrapper__2bc3n\",\"cardBody\":\"Profile_cardBody__14zzG\",\"inputPassword\":\"Profile_inputPassword__nLfcv\",\"inputTextPassword\":\"Profile_inputTextPassword__1cjGu\",\"iconPassword\":\"Profile_iconPassword__8Z-Gv\",\"invalidFeedBack\":\"Profile_invalidFeedBack__7_crA\",\"submit\":\"Profile_submit__3T48T\",\"bioContainer\":\"Profile_bioContainer__30P8I\",\"bioButton\":\"Profile_bioButton__3eVRF\",\"bioWrapper\":\"Profile_bioWrapper__D4L0N\",\"bio\":\"Profile_bio__2-1-C\",\"btnWrapper\":\"Profile_btnWrapper__HJ7yL\",\"btnGroupWrap\":\"Profile_btnGroupWrap__2Pcfh\"};"],"sourceRoot":""}