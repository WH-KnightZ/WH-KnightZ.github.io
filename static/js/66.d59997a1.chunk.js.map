{"version":3,"sources":["views/user/consulting/SearchFriend.tsx","views/user/consulting/FriendItem.tsx"],"names":["SearchFriend","dispatch","useDispatch","callApi","payload","callback","callApiAction","useState","data","loading","friend","setFriend","searchName","setSearchName","show","popupCancel","setPopupCancel","history","useHistory","popupRequestCancel","setPopupRequestCancel","changeStatus","userId","type","method","api","config","rest","addFriend","changeStatusFriend","deleteFriend","response","status","SUCCESS","newData","confirm","cancel","null","handleCancel","id","friends","push","searchParams","className","searchEmpty","callbackSearch","searchValue","getUserSearchName","searchFriend","timeoutSearch","inputStyle","width","style","padding","display","justifyContent","alignItems","zIndex","listStyle","paddingLeft","marginBottom","placeholder","to","isVisible","title","content","leftButtonText","rightButtonText","leftButtonOnPress","rightButtonOnPress","console","log","Object","keys","length","textAlign","md","marginTop","first_name","last_name","img","avatar","search","setPopUpCancel","FriendItem","props","handleOpen","success","setSuccess","borderRadius","border","cursor","onClick","src","alt","height","marginLeft","e","color","variant","checkStatus"],"mappings":"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","file":"static/js/66.d59997a1.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { CCol, CContainer, CHeader, CRow } from '@coreui/react';\nimport { RouteComponentProps, useHistory } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport config from '../../../config';\nimport Search from '../../../components/search/Search';\nimport FriendItem from './FriendItem';\nimport { ConfirmPopup } from '../../../components';\n\nconst SearchFriend: React.FC<RouteComponentProps> = () => {\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback?: (result: any) => void) => dispatch(callApiAction(payload, callback));\n  const [friend, setFriend] = useState<any>({ data: {}, loading: true });\n  const [searchName, setSearchName] = useState('');\n  const [popupCancel, setPopupCancel] = useState({ show: false });\n  const history = useHistory();\n  const [popupRequestCancel, setPopupRequestCancel] = useState({ show: false });\n\n  const searchFriend = (searchName: any) => {\n    callApi(\n      {\n        method: 'get',\n        api: config.rest.getUserSearchName(searchName),\n        loading: true,\n      },\n      (response) => {\n        const { data, status } = response;\n        if (status === SUCCESS) {\n          setFriend({\n            data: { ...data },\n            loading: false,\n          });\n        }\n      },\n    );\n  };\n\n  const changeStatus = (userId: any, type: any) => {\n    callApi(\n      {\n        method: type === null ? 'post' : type === 'confirm' ? 'put' : 'delete',\n        api:\n          type === null\n            ? config.rest.addFriend(userId)\n            : type === 'confirm'\n            ? config.rest.changeStatusFriend(userId)\n            : config.rest.deleteFriend(userId),\n        loading: true,\n      },\n      (response) => {\n        const { status } = response;\n        if (status === SUCCESS) {\n          setFriend((friend: any) => {\n            const key: any = { confirm: 'friend', cancel: null, friend: null, null: 'cancel' };\n            let newData = { ...friend };\n            newData.data.type = key[type];\n            return newData;\n          });\n        }\n      },\n    );\n  };\n\n  const unFriend = (userId: any, page: any) => {\n    callApi(\n      {\n        method: 'delete',\n        api: config.rest.deleteFriend(userId),\n        loading: true,\n      },\n      (response) => {\n        const { status } = response;\n        if (status === SUCCESS) {\n          setFriend((friends: any) => ({\n            ...friends,\n          }));\n          history.push('/consulting/add-friend');\n        }\n      },\n    );\n  };\n\n  const handleCancel = () => {\n    setPopupCancel({ show: false });\n    unFriend(friend.data.id, 1);\n  };\n\n  const handleCancelRequest = () => {\n    console.log('123');\n    setPopupRequestCancel({ show: false });\n    changeStatus(friend.data.id, friend.data.type);\n  };\n\n  const searchParams: any = {\n    className: 'header-topic--wrapper__search--selection__world',\n    searchName,\n    setSearchName,\n    searchEmpty: true,\n    callbackSearch: (searchValue: string) => searchFriend(searchValue),\n    timeoutSearch: 3000,\n    inputStyle: { width: 400 },\n  };\n\n  return (\n    <div>\n      <CContainer>\n        <div className=\"add-friend-page-wrapper\">\n          <CHeader\n            style={{ padding: 10, display: 'flex', justifyContent: 'space-between', alignItems: 'center', zIndex: 1 }}\n          >\n            <h4>Search Friend</h4>\n            <div style={{ width: 650 }}>\n              <ul\n                style={{\n                  listStyle: 'none',\n                  display: 'flex',\n                  paddingLeft: 0,\n                  justifyContent: 'space-between',\n                  marginBottom: 0,\n                  alignItems: 'center',\n                }}\n              >\n                <li>\n                  <Search {...searchParams} className=\"add-friend__search\" placeholder=\"Search friend\" />\n                </li>\n                <li>\n                  <Link to=\"/consulting/add-friend\">List Friend</Link>\n                </li>\n                <li>\n                  <Link to=\"/consulting/friend-request\">Friend Request</Link>\n                </li>\n              </ul>\n            </div>\n          </CHeader>\n          <div className=\"add-friend-main-page-body\">\n            <CRow>\n              <ConfirmPopup\n                isVisible={friend.data.type === 'cancel' ? popupRequestCancel.show : popupCancel.show}\n                title=\"Cancel\"\n                content={\n                  friend.data.type === 'cancel'\n                    ? 'Are you sure you want to cancel request?'\n                    : 'Are you sure you want to unfriend?'\n                }\n                leftButtonText=\"No\"\n                rightButtonText=\"Yes\"\n                leftButtonOnPress={() =>\n                  friend.data.type === 'cancel'\n                    ? setPopupRequestCancel({ show: false })\n                    : setPopupCancel({ show: false })\n                }\n                rightButtonOnPress={() => (friend.data.type === 'cancel' ? handleCancelRequest() : handleCancel())}\n              />\n              {Object.keys(friend.data).length === 0 ? (\n                <div style={{ textAlign: 'center', width: '100%' }}>{searchName ? 'No result' : 'Search by email'}</div>\n              ) : (\n                <CCol md={6} style={{ marginTop: 15 }}>\n                  <FriendItem\n                    first_name={friend.data.first_name}\n                    last_name={friend.data.last_name}\n                    img={friend.data.avatar}\n                    id={friend.data.id}\n                    changeStatus={changeStatus}\n                    status={friend.data.type}\n                    search={true}\n                    setPopUpCancel={setPopupCancel}\n                    setPopupRequestCancel={setPopupRequestCancel}\n                  />\n                </CCol>\n              )}\n            </CRow>\n          </div>\n        </div>\n      </CContainer>\n    </div>\n  );\n};\nexport default SearchFriend;\n","import React, { useState } from 'react';\nimport { CButton, CImg } from '@coreui/react';\nimport { useHistory } from 'react-router';\n\ninterface Props {\n  first_name: string;\n  last_name: string;\n  img: any;\n  id: any;\n  changeStatus?: any;\n  status?: 'friend' | 'confirm' | 'cancel' | null;\n  menuPopup?: any;\n  handleOpen?: any;\n  handleClose?: any;\n  search?: any;\n  setPopUpCancel?: any;\n  setPopupRequestCancel?: any;\n}\n\nconst FriendItem: React.FC<Props> = (props) => {\n  const {\n    first_name,\n    last_name,\n    img,\n    id,\n    changeStatus,\n    status,\n    handleOpen,\n    search,\n    setPopUpCancel,\n    setPopupRequestCancel,\n  } = props;\n  const history = useHistory();\n  const [success, setSuccess] = useState('');\n\n  const checkStatus = (status: any, search: any) => {\n    if (status === 'friend') {\n      if (search === false)\n        return (\n          <div onClick={(e) => handleOpen(e, { id })}>\n            <i className=\"fas fa-ellipsis-h\"></i>\n          </div>\n        );\n\n      return (\n        <div>\n          <CButton\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              setPopUpCancel({ show: true });\n            }}\n          >\n            Unfriend\n          </CButton>\n          <CButton\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              console.log('123');\n              // history.push('/consulting/add-friend');\n            }}\n          >\n            <i className=\"fas fa-phone\"></i> Call\n          </CButton>\n        </div>\n      );\n    }\n\n    if (status === 'confirm') {\n      // Request removed\n      if (success !== '') return <div>{success}</div>;\n      return (\n        <div style={{ width: 150, display: 'flex', justifyContent: 'space-between' }}>\n          <CButton\n            id=\"btn_delete\"\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              changeStatus(id, 'cancel');\n              setSuccess('Request removed');\n            }}\n          >\n            Delete\n          </CButton>\n          <CButton\n            id=\"btn_confirm\"\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              changeStatus(id, 'confirm');\n              setSuccess('Request accepted');\n            }}\n          >\n            Confirm\n          </CButton>\n        </div>\n      );\n    }\n    if (status === 'cancel') {\n      return (\n        <CButton color=\"primary\" variant=\"outline\" onClick={() => setPopupRequestCancel({ show: true })}>\n          Cancel request\n        </CButton>\n      );\n    }\n\n    return (\n      <CButton color=\"primary\" variant=\"outline\" onClick={() => changeStatus(id, null)}>\n        Add friend\n      </CButton>\n    );\n  };\n\n  return (\n    <div>\n      <div\n        className=\"friend-request-main-page-body--wrapper\"\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          borderRadius: 7,\n          border: '1px solid ',\n          padding: 8,\n        }}\n      >\n        <div\n          className=\"friend-request-main-page-body--information\"\n          style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', cursor: 'pointer' }}\n          onClick={() => history.push(`/consulting/information/${id}`)}\n        >\n          <CImg\n            src={img || 'https://i.stack.imgur.com/l60Hf.png'}\n            alt=\"Avatar\"\n            width={80}\n            height={80}\n            style={{ borderRadius: 10 }}\n          />\n          <h4 style={{ marginLeft: 20 }}>\n            {first_name} {last_name}\n          </h4>\n        </div>\n        <div className=\"friend-request-main-page-body--config\">{checkStatus(status, search)}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default FriendItem;\n"],"sourceRoot":""}