(this["webpackJsonphb-frontend"]=this["webpackJsonphb-frontend"]||[]).push([[8],{634:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return r}));var i={black:"#1d1d1d",white:"#ffffff",offWhite:"#e6e6e6",orange:"#FBA928",orangeDarker:"#EB9918",lightGrey:"#939AA4",lighterGrey:"#CDD4DA",red:"#ED3833",gray:"#687187",lightBlue:"#C5CEE0",mLightBgDarkPrimaryText:"#DE000000",mLightBgDarkSecondaryText:"#8A000000",mLightBgDarkDisabledText:"#61000000",mLightBgDarkHintText:"#61000000",mDarkBgLightPrimaryText:"#FFFFFFFF",mDarkBgLightSecondaryText:"#B3FFFFFF",mDarkBgLightDisabledText:"#80FFFFFF",mDarkBgLightHintText:"#80FFFFFF",mRed50:"#FFEBEE",mRed100:"#FFCDD2",mRed200:"#EF9A9A",mRed300:"#E57373",mRed400:"#EF5350",mRed500:"#F44336",mRed600:"#E53935",mRed700:"#D32F2F",mRed800:"#C62828",mRed900:"#B71C1C",mRedA100:"#FF8A80",mRedA200:"#FF5252",mRedA400:"#FF1744",mRedA700:"#D50000",mDeepPurple50:"#EDE7F6",mDeepPurple100:"#D1C4E9",mDeepPurple200:"#B39DDB",mDeepPurple300:"#9575CD",mDeepPurple400:"#7E57C2",mDeepPurple500:"#673AB7",mDeepPurple600:"#5E35B1",mDeepPurple700:"#512DA8",mDeepPurple800:"#4527A0",mDeepPurple900:"#311B92",mDeepPurpleA100:"#B388FF",mDeepPurpleA200:"#7C4DFF",mDeepPurpleA400:"#651FFF",mDeepPurpleA700:"#6200EA",mLightBlue50:"#E1F5FE",mLightBlue100:"#B3E5FC",mLightBlue200:"#81D4FA",mLightBlue300:"#4FC3F7",mLightBlue400:"#29B6F6",mLightBlue500:"#03A9F4",mLightBlue600:"#039BE5",mLightBlue700:"#0288D1",mLightBlue800:"#0277BD",mLightBlue900:"#01579B",mLightBlueA100:"#80D8FF",mLightBlueA200:"#40C4FF",mLightBlueA400:"#00B0FF",mLightBlueA700:"#0091EA",mGreen50:"#E8F5E9",mGreen100:"#C8E6C9",mGreen200:"#A5D6A7",mGreen300:"#81C784",mGreen400:"#66BB6A",mGreen500:"#4CAF50",mGreen600:"#43A047",mGreen700:"#388E3C",mGreen800:"#2E7D32",mGreen900:"#1B5E20",mGreenA100:"#B9F6CA",mGreenA200:"#69F0AE",mGreenA400:"#00E676",mGreenA700:"#00C853",mYellow50:"#FFFDE7",mYellow100:"#FFF9C4",mYellow200:"#FFF59D",mYellow300:"#FFF176",mYellow400:"#FFEE58",mYellow500:"#FFEB3B",mYellow600:"#FDD835",mYellow700:"#FBC02D",mYellow800:"#F9A825",mYellow900:"#F57F17",mYellowA100:"#FFFF8D",mYellowA200:"#FFFF00",mYellowA400:"#FFEA00",mYellowA700:"#FFD600",mDeepOrange50:"#FBE9E7",mDeepOrange100:"#FFCCBC",mDeepOrange200:"#FFAB91",mDeepOrange300:"#FF8A65",mDeepOrange400:"#FF7043",mDeepOrange500:"#FF5722",mDeepOrange600:"#F4511E",mDeepOrange700:"#E64A19",mDeepOrange800:"#D84315",mDeepOrange900:"#BF360C",mDeepOrangeA100:"#FF9E80",mDeepOrangeA200:"#FF6E40",mDeepOrangeA400:"#FF3D00",mDeepOrangeA700:"#DD2C00",mBlueGrey50:"#ECEFF1",mBlueGrey100:"#CFD8DC",mBlueGrey200:"#B0BEC5",mBlueGrey300:"#90A4AE",mBlueGrey400:"#78909C",mBlueGrey500:"#607D8B",mBlueGrey600:"#546E7A",mBlueGrey700:"#455A64",mBlueGrey800:"#37474F",mBlueGrey900:"#263238",mPink50:"#FCE4EC",mPink100:"#F8BBD0",mPink200:"#F48FB1",mPink300:"#F06292",mPink400:"#EC407A",mPink500:"#E91E63",mPink600:"#D81B60",mPink700:"#C2185B",mPink800:"#AD1457",mPink900:"#880E4F",mPinkA100:"#FF80AB",mPinkA200:"#FF4081",mPinkA400:"#F50057",mPinkA700:"#C51162",mIndigo50:"#E8EAF6",mIndigo100:"#C5CAE9",mIndigo200:"#9FA8DA",mIndigo300:"#7986CB",mIndigo400:"#5C6BC0",mIndigo500:"#3F51B5",mIndigo600:"#3949AB",mIndigo700:"#303F9F",mIndigo800:"#283593",mIndigo900:"#1A237E",mIndigoA100:"#8C9EFF",mIndigoA200:"#536DFE",mIndigoA400:"#3D5AFE",mIndigoA700:"#304FFE",mCyan50:"#E0F7FA",mCyan100:"#B2EBF2",mCyan200:"#80DEEA",mCyan300:"#4DD0E1",mCyan400:"#26C6DA",mCyan500:"#00BCD4",mCyan600:"#00ACC1",mCyan700:"#0097A7",mCyan800:"#00838F",mCyan900:"#006064",mCyanA100:"#84FFFF",mCyanA200:"#18FFFF",mCyanA400:"#00E5FF",mCyanA700:"#00B8D4",mLightGreen50:"#F1F8E9",mLightGreen100:"#DCEDC8",mLightGreen200:"#C5E1A5",mLightGreen300:"#AED581",mLightGreen400:"#9CCC65",mLightGreen500:"#8BC34A",mLightGreen600:"#7CB342",mLightGreen700:"#689F38",mLightGreen800:"#558B2F",mLightGreen900:"#33691E",mLightGreenA100:"#CCFF90",mLightGreenA200:"#B2FF59",mLightGreenA400:"#76FF03",mLightGreenA700:"#64DD17",mAmber50:"#FFF8E1",mAmber100:"#FFECB3",mAmber200:"#FFE082",mAmber300:"#FFD54F",mAmber400:"#FFCA28",mAmber500:"#FFC107",mAmber600:"#FFB300",mAmber700:"#FFA000",mAmber800:"#FF8F00",mAmber900:"#FF6F00",mAmberA100:"#FFE57F",mAmberA200:"#FFD740",mAmberA400:"#FFC400",mAmberA700:"#FFAB00",mBrown50:"#EFEBE9",mBrown100:"#D7CCC8",mBrown200:"#BCAAA4",mBrown300:"#A1887F",mBrown400:"#8D6E63",mBrown500:"#795548",mBrown600:"#6D4C41",mBrown700:"#5D4037",mBrown800:"#4E342E",mBrown900:"#3E2723",mPurple50:"#F3E5F5",mPurple100:"#E1BEE7",mPurple200:"#CE93D8",mPurple300:"#BA68C8",mPurple400:"#AB47BC",mPurple500:"#9C27B0",mPurple600:"#8E24AA",mPurple700:"#7B1FA2",mPurple800:"#6A1B9A",mPurple900:"#4A148C",mPurpleA100:"#EA80FC",mPurpleA200:"#E040FB",mPurpleA400:"#D500F9",mPurpleA700:"#AA00FF",mBlue50:"#E3F2FD",mBlue100:"#BBDEFB",mBlue200:"#90CAF9",mBlue300:"#64B5F6",mBlue400:"#42A5F5",mBlue500:"#2196F3",mBlue600:"#1E88E5",mBlue700:"#1976D2",mBlue800:"#1565C0",mBlue900:"#0D47A1",mBlueA100:"#82B1FF",mBlueA200:"#448AFF",mBlueA400:"#2979FF",mBlueA700:"#2962FF",mTeal50:"#E0F2F1",mTeal100:"#B2DFDB",mTeal200:"#80CBC4",mTeal300:"#4DB6AC",mTeal400:"#26A69A",mTeal500:"#009688",mTeal600:"#00897B",mTeal700:"#00796B",mTeal800:"#00695C",mTeal900:"#004D40",mTealA100:"#A7FFEB",mTealA200:"#64FFDA",mTealA400:"#1DE9B6",mTealA700:"#00BFA5",mLime50:"#F9FBE7",mLime100:"#F0F4C3",mLime200:"#E6EE9C",mLime300:"#DCE775",mLime400:"#D4E157",mLime500:"#CDDC39",mLime600:"#C0CA33",mLime700:"#AFB42B",mLime800:"#9E9D24",mLime900:"#827717",mLimeA100:"#F4FF81",mLimeA200:"#EEFF41",mLimeA400:"#C6FF00",mLimeA700:"#AEEA00",mOrange50:"#FFF3E0",mOrange100:"#FFE0B2",mOrange200:"#FFCC80",mOrange300:"#FFB74D",mOrange400:"#FFA726",mOrange500:"#FF9800",mOrange600:"#FB8C00",mOrange700:"#F57C00",mOrange800:"#EF6C00",mOrange900:"#E65100",mOrangeA100:"#FFD180",mOrangeA200:"#FFAB40",mOrangeA400:"#FF9100",mOrangeA700:"#FF6D00",mGrey50:"#FAFAFA",mGrey100:"#F5F5F5",mGrey200:"#EEEEEE",mGrey300:"#E0E0E0",mGrey400:"#BDBDBD",mGrey500:"#9E9E9E",mGrey600:"#757575",mGrey700:"#616161",mGrey800:"#424242",mGrey900:"#212121"},a={background:"#ffffff",backgroundGray:"#F1F2F3",transparentBackground:"#00000055",border:"#EDF1F7",primary:"#ed3833",primaryLighter:"#EE4953",secondary:"#f3a805",line:i.offWhite,text:"#22242a",dim:"#cdcdd7",error:"#ef4b5f",success:"#27ae60",shadow:"#2f3542",storybookDarkBg:i.black,storybookTextColor:i.black,white:"#ffffff",gray70:"#222B45",gray650:"#687187",gray60:"#8F9BB3",gray50:"#C5CEE0",gray3:"#cdcdd7",gray4:"#8d92a3",blue:"#3785D9",gray2:"#f1f3f8",gray1:"#F7F9FC",gray5:"#798195",gray6:"#E4E9F2",darkBlue:"#2E3A59",palette:i,transparent:"rgba(0, 0, 0, 0)",link:"#1890ff",scrim:"rgba(0, 0, 0, 0.6)",purple:"#722ed1",pink:"#eb2f96",yellow:"#fadb14",lime:"#a0d911",teal:"#13c2c2",indigo:"#2f54eb"},l={textSize:{h1:32,h2:28,h3:24,h4:20,h5:16,h6:12,large:20,title:18,normal:16,subTitle:14,small:12}},r=[0,4,8,12,16,20,24,28,32,36,40,44,48,52,56,60,64,68,72,76,80,84,88,92,96,100]},693:function(e,t,n){"use strict";t.a="data:image/png;base64,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"},737:function(e,t,n){"use strict";var i,a=n(47),l=n(7),r=n(3),c=n(16),d=n(19),o=n(1),s=n(20),u=n(39),m=n(56),b=n(96),j=n(29),g=n(38),h=n(41),A=n.n(h),p=n(85),v=n(602),f=n(618),O=n(730),F=n.n(O),x=n(964),y=n.n(x),C=(n(692),n(603)),D=n(738),B=n(634),w=n(44),E=n.n(w),k=n(89),S=n(659),N=n.n(S),P=n(31),I=n(660),L=n.n(I),T=n(32),G=n(186),R=n(693),_=function(e){var t=e.videoId,n=e.thumbnail,i=e.setThumbnail,a=e.loading,l=e.setLoading,s=Object(G.b)().callApi,u=Object(o.useState)(!1),m=Object(c.a)(u,2),j=m[0],g=m[1];Object(o.useEffect)((function(){t&&g(!1)}),[t]);var h=Object(o.useRef)(null);return Object(r.jsxs)(d.r,{children:[Object(r.jsx)(d.B,{children:"Thumbnail"}),Object(r.jsx)("div",{className:"modal-thumbnail",children:n?Object(r.jsxs)("div",{className:"thumbnail-wrapper",children:[Object(r.jsx)(b.q,{src:n}),Object(r.jsx)("div",{className:"thumbnail-overlay"}),Object(r.jsx)("i",{onClick:function(){i("")},className:"fas fa-times-circle btn-remove"}),a&&Object(r.jsx)(d.M,{className:"thumbnail-spinner"})]}):Object(r.jsxs)("div",{className:"upload-wrapper",onClick:function(){var e,t;return null===(e=h.current)||void 0===e||null===(t=e.click)||void 0===t?void 0:t.call(e)},children:[Object(r.jsxs)("div",{className:"upload-icon-wrapper",children:[Object(r.jsx)("img",{className:"icon-upload",src:R.a}),Object(r.jsx)("div",{className:"text-center",children:"Upload Thumbnail"}),Object(r.jsx)("input",{type:"file",id:"custom_thumbnail",name:"custom_thumbnail",ref:h,style:{display:"none"},accept:"image/*",onChange:function(e){var n=new FileReader,a=e.target.files[0];if(a)if(a.size>52428800)g(!0);else{var r="",c="";n.onload=function(){i(n.result),l(!0),s({method:"get",api:"/api/v1/upload/image-video-thumbnail?file_name=".concat(Object(T.i)(a.name),"&video_id=").concat(t)},(function(e){if(e.status===G.a){var t,n,d;r=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.link,c=null===e||void 0===e||null===(n=e.data)||void 0===n||null===(d=n.file_path)||void 0===d?void 0:d.link;var o=new Headers;o.append("x-amz-acl","public-read"),fetch(r,{method:"PUT",headers:o,body:a,redirect:"follow"}).then((function(e){return e.text()})).then((function(){l(!1),i(c)})).catch((function(e){return console.log("error",e)}))}else l(!1)}))},n.readAsDataURL(a),e.target.value=null}}})]}),j&&Object(r.jsxs)("div",{className:"upload-file-error",children:[Object(r.jsx)("i",{className:"fas fa-exclamation-triangle mr-2"}),Object(r.jsx)("div",{style:{width:94},children:"Cannot upload file larger than 50MB"})]})]})})]})},M=function(e){var t,n,u,m,h,O,x=e.show,w=e.handleClose,S=e.type,I=e.formValue,R=e.uploadingVideos,M=e.setUploadingVideos,U=e.videos,V=e.setVideos,z=(e.satisfyFilter,e.auth),Q=e.onSuccess,K=e.addNo,Y=Object(o.useState)({videoId:e.videoId,link:""}),H=Object(c.a)(Y,2),q=H[0],J=H[1],W=Object(f.a)().t,X=Object(s.c)(),Z=Object(G.b)().callApi,$=Object(s.d)((function(e){return e.auth.access_token})),ee=Object(o.useState)(null),te=Object(c.a)(ee,2),ne=te[0],ie=te[1],ae=Object(o.useState)(""),le=Object(c.a)(ae,2),re=le[0],ce=le[1],de=Object(o.useState)(!1),oe=Object(c.a)(de,2),se=oe[0],ue=oe[1],me=Object(o.useState)(""),be=Object(c.a)(me,2),je=be[0],ge=be[1],he=Object(o.useState)(""),Ae=Object(c.a)(he,2),pe=Ae[0],ve=Ae[1],fe=Object(o.useState)({data:[],loading:!0,full:!1,page:1}),Oe=Object(c.a)(fe,2),Fe=Oe[0],xe=Oe[1],ye=Object(o.useState)(null),Ce=Object(c.a)(ye,2),De=Ce[0],Be=Ce[1],we=Object(o.useState)(""),Ee=Object(c.a)(we,2),ke=Ee[0],Se=Ee[1],Ne=Object(o.useState)({data:[],loading:!0,full:!1,page:1}),Pe=Object(c.a)(Ne,2),Ie=Pe[0],Le=Pe[1],Te=Object(o.useState)(null),Ge=Object(c.a)(Te,2),Re=Ge[0],_e=Ge[1],Me=Object(o.useState)(!1),Ue=Object(c.a)(Me,2),Ve=Ue[0],ze=Ue[1],Qe=C.b().shape({title:null===(t=C.d())||void 0===t||null===(n=t.trim())||void 0===n?void 0:n.required(W("video-title-required")),posture_type:null===(u=C.d())||void 0===u||null===(m=u.trim())||void 0===m?void 0:m.required("")}),Ke=Object(o.useState)(""),Ye=Object(c.a)(Ke,2),He=Ye[0],qe=Ye[1],Je=Object(o.useRef)(null),We=function(e,t){Z({method:"get",api:"/api/v1/admin/categories?page_size=80&search_name=".concat(e,"&page_number=").concat(t)},(function(n){var i=n.status,l=n.data;i===g.c&&xe((function(n){var i=l.data.map((function(e){return{id:e.id,name:e.title}}));return{data:1===t?""===e?[null].concat(Object(a.a)(i)):i:[].concat(Object(a.a)(n.data),Object(a.a)(i)),loading:!1,full:l.data.length<10,page:t}}))}))},Xe=function(e,t){Z({method:"get",api:j.d.rest.adminGetMobilityTrainers(t,e,!0,!0)},(function(n){var i=n.status,l=n.data;i===g.c&&Le((function(n){var i=l.trainers.map((function(e){return{id:e.id,name:e.first_name+" "+e.last_name}}));return{data:1===t?""===e?[null].concat(Object(a.a)(i)):i:[].concat(Object(a.a)(n.data),Object(a.a)(i)),loading:!1,full:l.trainers.length<10,page:t}}))}))};Object(o.useEffect)((function(){x&&(J(Object(l.a)(Object(l.a)({},q),{},{videoId:e.videoId})),ce(""),We("",1),Xe("",1),ve(I.category_name),Se(I.trainer_name),Be(I.category_id?{id:I.category_id,name:I.category_name}:null),_e(I.trainer_id?{id:I.trainer_id,name:I.trainer_name}:null))}),[x]);var Ze=(new AbortController).signal;Ze.addEventListener("abort",(function(){console.log(Ze.aborted)}));var $e=function(e){var t=e[0],n=Object(T.i)(null===t||void 0===t?void 0:t.name);Z({method:"get",loading:!0,api:j.d.rest.getTemporaryUploadLink(n)},(function(e){var n=e.status,i=e.data;n===g.c&&(J({videoId:i.video_id,link:i.link}),V((function(e){var t=Object(l.a)({},e);return t.data=[{id:i.video_id,thumbnail:"",hls_link:Je.current.values.video,name:"",description:"",status:"Uploading",created_date:(new Date).getTime()/1e3,modified_date:null,uploader:z.first_name+" "+z.last_name,tag:"",views:0,comment:0,like:0,documents:[]}].concat(Object(a.a)(t.data.slice(0,9))).map(K),t})),nt(i.link,t,i.video_id),et(i.video_id))}))},et=function(e){var t=JSON.parse(P.i.get("videosUploading"))||[];t.push(e),P.i.set("videosUploading",JSON.stringify(t))},tt=function(){var e=Object(p.a)(A.a.mark((function e(t,n){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.a.get(j.d.rest.getTemporaryUploadDocument(t,n)).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){return null===e||void 0===e?void 0:e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nt=function(e,t,n){(new Headers).append("x-amz-acl","public-read"),M((function(e){return[].concat(Object(a.a)(e),[{id:n,progress:0}])}));var l=E.a.create();delete l.defaults.baseURL,delete l.defaults.headers.common.Authorization,i=E.a.CancelToken.source(),l({method:"put",url:e,headers:{"x-amz-acl":"public-read","Content-Type":null===t||void 0===t?void 0:t.type},data:t,onUploadProgress:function(e){M((function(t){var i=Object(a.a)(t),l=i.findIndex((function(e){return e.id===n}));return l>-1?(i[l].progress=Math.round(100*e.loaded/e.total),i):i}))},cancelToken:i.token}).then((function(e){var t;!function(e){var t=P.i.get("videosUploading"),n=JSON.parse(t).filter((function(t){return t!==e}));P.i.set("videosUploading",JSON.stringify(n))}(n),M((function(e){return e.filter((function(e){return e.id!==n}))})),Q(n),null===(t=Je.current)||void 0===t||t.setFieldValue("status","Processing")})).catch((function(e){console.log(e)}))},it=function(e,t){var n={name:e.title||"",posture_type:e.posture_type||"",description:e.description||"",tag:e.tags.toString(),category_id:null===De||void 0===De?void 0:De.id,category_name:(null===De||void 0===De?void 0:De.name)||"Non category",trainer_id:null===Re||void 0===Re?void 0:Re.id,trainer_name:null===Re||void 0===Re?void 0:Re.name,status:"Disable"===(null===e||void 0===e?void 0:e.status)?0:1,documents:(null===e||void 0===e?void 0:e.documents)||[],custom_thumbnail:null===e||void 0===e?void 0:e.custom_thumbnail},i=Object(l.a)({},n);delete i.category_name,delete i.trainer_name,Z({method:"put",api:j.d.rest.editVideo(t),body:i,loading:!0},(function(e){e.status===g.c&&(Je.current.resetForm(),w(),ue(!1),Q(t,n))}))},at=Object(o.useState)({show:!1,title:"",left:"",right:"",callback:function(){}}),lt=Object(c.a)(at,2),rt=lt[0],ct=lt[1],dt=function(){w(),ue(!1),Je.current.resetForm(),ce(""),ge(""),ie(null)},ot=function(){w(),i.cancel("Upload cancelled"),Je.current.resetForm(),ce(""),ge(""),ie(null),M((function(e){return e.filter((function(e){return e.id!==q.videoId}))})),ct(Object(l.a)(Object(l.a)({},rt),{},{show:!1}))},st=function(e,t,n,i){Je.current.dirty||((null===De||void 0===De?void 0:De.id)||"1")!==I.category_id||((null===Re||void 0===Re?void 0:Re.id)||"")!==I.trainer_id?ct(Object(l.a)(Object(l.a)({},rt),{},{show:!0,title:e,left:t,right:n,callback:i})):dt()},ut=null===(h=R.filter((function(e){return e.id===q.videoId})))||void 0===h?void 0:h[0],mt=null===(O=U.data.filter((function(e){return e.id===q.videoId})))||void 0===O?void 0:O[0],bt="Processing"===(null===mt||void 0===mt?void 0:mt.status),jt="Draft"===(null===mt||void 0===mt?void 0:mt.status)||"Posted"===(null===mt||void 0===mt?void 0:mt.status),gt="create"===S&&!se;return Object(r.jsx)("div",{className:"flex-row align-items-center",children:Object(r.jsxs)(b.c,{size:"lg",centered:!0,show:x,onClose:dt,onClosed:function(){return dt()},closeOnBackdrop:!1,children:[Object(r.jsxs)(b.d,{children:[W("create"===S?"upload-video":"edit-video"),Object(r.jsx)(b.b,{onClick:"create"===S?dt:function(){return st("Are you sure you want to discard your changes?","Discard","Keep Editing",(function(){ct(Object(l.a)(Object(l.a)({},rt),{},{show:!1})),dt()}))}})]}),Object(r.jsxs)(d.D,{children:[Object(r.jsxs)(b.c,{size:"sm",show:rt.show,centered:!0,closeOnBackdrop:!1,children:[Object(r.jsx)(d.D,{style:{textAlign:"center",padding:20},children:rt.title}),Object(r.jsxs)(d.E,{style:{display:"flex",justifyContent:"space-around"},children:[Object(r.jsx)(d.d,{style:{width:120},color:"danger",onClick:rt.callback,children:rt.left}),Object(r.jsx)(d.d,{style:{width:120},color:"primary",onClick:function(){return ct(Object(l.a)(Object(l.a)({},rt),{},{show:!1}))},children:rt.right})]})]}),Object(r.jsx)(d.I,{className:"justify-content-center",children:Object(r.jsx)(d.j,{md:"12",children:Object(r.jsx)(d.h,{children:Object(r.jsx)(d.e,{className:gt?"card-no-border":"",children:Object(r.jsx)(d.f,{children:Object(r.jsx)(v.c,{innerRef:Je,enableReinitialize:!0,initialValues:I,validationSchema:Qe,onSubmit:function(e){it(e,"create"===S?q.videoId:e.id)},children:function(e){var t,n,c=e.values,o=e.errors,s=e.touched,u=(e.status,e.dirty),m=e.handleChange,j=e.handleBlur,g=e.handleSubmit,h=(e.isSubmitting,e.isValid),A=(e.handleReset,e.setTouched,e.setFieldValue),p=e.setFieldTouched;return Object(r.jsxs)(d.q,{onSubmit:g,children:[("create"===S&&se||"update"===S)&&Object(r.jsxs)("div",{children:[Object(r.jsxs)(d.I,{children:[Object(r.jsxs)(d.j,{children:[Object(r.jsxs)(d.r,{children:[Object(r.jsxs)(d.B,{children:[W("title")," (*)"]}),Object(r.jsx)(d.u,{type:"text",onChange:function(e){m(e)},invalid:!(!s.title||!o.title),placeholder:W("title"),autoComplete:"title",maxLength:100,value:(null===c||void 0===c?void 0:c.title)||"",onBlur:j,name:"title"}),(null===o||void 0===o?void 0:o.title)&&!!s.title&&Object(r.jsx)("p",{style:{fontSize:B.b.textSize.small,color:B.a.error,marginTop:B.c[1]},children:o.title})]}),Object(r.jsxs)(d.r,{children:[Object(r.jsx)(d.B,{children:"Type (*)"}),Object(r.jsxs)("div",{className:"d-flex mb-2",children:[Object(r.jsx)(d.u,{style:{maxWidth:24,marginRight:10},type:"radio",onChange:m,checked:"standing"===(null===c||void 0===c?void 0:c.posture_type),value:"standing",name:"posture_type"}),"Standing exercises"]}),Object(r.jsxs)("div",{className:"d-flex mb-2",children:[Object(r.jsx)(d.u,{style:{maxWidth:24,marginRight:10},type:"radio",onChange:m,checked:"sit"===(null===c||void 0===c?void 0:c.posture_type),value:"sit",name:"posture_type"}),"Sitting exercises"]}),Object(r.jsxs)("div",{className:"d-flex mb-2",children:[Object(r.jsx)(d.u,{style:{maxWidth:24,marginRight:10},type:"radio",onChange:m,checked:"lie"===(null===c||void 0===c?void 0:c.posture_type),value:"lie",name:"posture_type"}),"Lying down exercises"]})]}),Object(r.jsx)(_,{videoId:q.videoId,loading:Ve,setLoading:ze,thumbnail:null===c||void 0===c?void 0:c.custom_thumbnail,setThumbnail:function(e){return A("custom_thumbnail",e)}})]}),Object(r.jsx)(d.j,{children:Object(r.jsxs)("div",{style:{margin:"20px 0"},children:["update"===S||(null===c||void 0===c?void 0:c.video)||ne?Object(r.jsxs)("div",{style:{backgroundColor:B.a.gray3,alignItems:"center",height:200},children:["Uploading"!==(null===c||void 0===c?void 0:c.status)&&Object(r.jsx)(F.a,{url:Object(T.a)((null===I||void 0===I?void 0:I.hls_link)||(null===c||void 0===c?void 0:c.video),$),width:"100%",height:"100%",controls:!0}),"create"===S&&ne&&!(null===c||void 0===c?void 0:c.status)&&Object(r.jsx)("i",{onClick:function(){var e;null===(e=i)||void 0===e||e.cancel("Upload cancelled"),A("video",null),ie(null),M((function(e){return e.filter((function(e){return e.id!==q.videoId}))}))},style:{position:"absolute",top:24,right:20},className:"fas fa-times-circle fa-2x"})]}):Object(r.jsx)("div",{children:Object(r.jsx)("div",{className:"upload-file-container",children:Object(r.jsx)(D.a,{accept:".mp4,.wmv,.flv,.mov,.avi",maxFiles:1,maxSize:5e9,onDropRejected:function(e){ce("Cannot upload file larger than 5GB")},onDropAccepted:function(e){var t,n,i=e[0];$e(e),ie(i),A("title",(null===i||void 0===i||null===(t=i.name)||void 0===t?void 0:t.substr(0,null===i||void 0===i||null===(n=i.name)||void 0===n?void 0:n.lastIndexOf(".")))||""),setTimeout((function(){p("title")})),A("video",URL.createObjectURL(i)),ce("")},children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object(r.jsxs)("div",Object(l.a)(Object(l.a)({className:"drag-container"},t()),{},{children:[Object(r.jsx)("input",Object(l.a)({},n())),Object(r.jsx)("p",{style:{fontWeight:"bold"},children:"Drop and Drag file here, or click to select file"}),re&&Object(r.jsxs)("div",{className:"file-error-container",children:[Object(r.jsx)("i",{style:{color:B.a.error},className:"fas fa-exclamation-triangle"}),Object(r.jsx)("div",{className:"file-error-msg-text",children:re})]})]}))}})})}),Object(r.jsxs)("div",{className:"d-flex justify-content-center",style:{position:"relative",height:20},children:[ut&&Object(r.jsx)("div",{style:{position:"absolute",top:20,borderRadius:100,overflow:"hidden",width:"100%"},children:Object(r.jsx)(N.a,{completed:null===ut||void 0===ut?void 0:ut.progress,height:"15px",baseBgColor:B.a.palette.lightBlue,bgColor:B.a.blue,transitionDuration:"0.5s",transitionTimingFunction:"linear"})}),bt&&Object(r.jsx)("div",{style:{position:"absolute"},children:Object(r.jsx)(L.a,{type:"bubbles",color:"var(--primary)",width:80})}),ut&&Object(r.jsx)("div",{style:{position:"absolute",top:40,fontSize:14},children:Object(r.jsx)("div",{children:"Video is uploading"})}),bt&&Object(r.jsx)("div",{style:{position:"absolute",top:60,fontSize:14},children:Object(r.jsx)("div",{children:"Video is processing"})}),jt&&Object(r.jsx)("div",{style:{position:"absolute",top:20,fontSize:14},children:Object(r.jsx)("div",{children:"Video is processed"})})]})]})})]}),Object(r.jsxs)("div",{className:"row",children:[Object(r.jsxs)(d.r,{className:"col-md-6",children:[Object(r.jsx)(d.B,{children:"Trainer"}),Object(r.jsx)("div",{style:{width:"100%"},children:Object(r.jsx)(b.x,Object(l.a)(Object(l.a)({selected:Re,setSelected:_e,defaultValue:"Select trainer",value:ke,setValue:Se,callbackSearch:Xe},Ie),{},{maxLength:50}))})]}),Object(r.jsxs)(d.r,{className:"col-md-6",children:[Object(r.jsx)(d.B,{children:W("category")}),Object(r.jsx)("div",{style:{width:"100%"},children:Object(r.jsx)(b.x,Object(l.a)(Object(l.a)({selected:De,setSelected:Be,defaultValue:"Select category",value:pe,setValue:ve,callbackSearch:We},Fe),{},{maxLength:50,maxHeight:330}))})]})]}),Object(r.jsxs)(d.r,{children:[Object(r.jsx)(d.B,{children:W("tags")}),Object(r.jsx)(y.a,{value:(null===c||void 0===c?void 0:c.tags)||[],onChange:function(e){A("tags",e),qe("")},inputValue:He,onChangeInput:function(e){var t=(null===e||void 0===e?void 0:e.trim())||"";(""===e||/^[a-z0-9\xdf\xfc\xdc\xf6\xd6\xe4\xc4_][-\w\xdf\xfc\xdc\xf6\xd6\xe4\xc4 ]*$/.test(e))&&qe(t)},addKeys:[9,13,32],maxTags:10,onlyUnique:!0})]}),Object(r.jsxs)(d.r,{children:[Object(r.jsx)(d.B,{children:"Documents"}),null===c||void 0===c||null===(t=c.documents)||void 0===t?void 0:t.map((function(e,t){return Object(r.jsxs)("li",{style:{width:"100%",display:"flex",alignItems:"center",marginBottom:B.c[2]},children:[Object(r.jsx)("a",{target:"_blank",href:null===e||void 0===e?void 0:e.link,children:e.file_name}),Object(r.jsx)("i",{style:{marginLeft:10},onClick:function(){var e=Object(a.a)(c.documents);e.splice(t,1),A("documents",e)},className:"fas fa-times-circle fa"})]},t)})),Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{className:"upload-file-container",children:Object(r.jsx)(D.a,{accept:".pdf",disabled:(null===c||void 0===c||null===(n=c.documents)||void 0===n?void 0:n.length)>9,maxFiles:10,onDropRejected:function(e){ge(e[0].errors[0].message||"")},onDropAccepted:function(e){ge(""),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Array.from(e).slice(0,10-t.length),i=null===n||void 0===n?void 0:n.map((function(e,t){return tt(null===e||void 0===e?void 0:e.name,"create"===S?q.videoId:I.id)}));X(Object(k.c)()),Promise.all(i).then((function(i){for(var l,r,c=[],d=0;d<i.length;d++){var o;200===(null===(o=i[d])||void 0===o?void 0:o.code)?c.push(i[d].data.file_path):X(Object(k.d)())}(null===i||void 0===i?void 0:i.length)&&function(){for(var d=0,o=0;o<n.length;o++){var s,u;(new FileReader).readAsDataURL(e[o]),(l=new Headers).append("x-amz-acl","public-read"),r={method:"PUT",headers:l,body:e[o],redirect:"follow"},fetch(null===(s=i[o])||void 0===s||null===(u=s.data)||void 0===u?void 0:u.link,r).then((function(e){return e.text()})).then((function(e){var n;(d+=1)===i.length&&(null===Je||void 0===Je||null===(n=Je.current)||void 0===n||n.setFieldValue("documents",[].concat(Object(a.a)(t),c)),X(Object(k.d)()))})).catch((function(e){X(Object(k.d)())}))}}()}))}(e,null===c||void 0===c?void 0:c.documents)},children:function(e){var t,n=e.getRootProps,i=e.getInputProps;return Object(r.jsxs)("div",Object(l.a)(Object(l.a)({},n()),{},{style:{borderWidth:1,borderRadius:"0.25rem",borderColor:"#d8dbe0",borderStyle:"solid",justifyContent:"center",alignItems:"center",padding:6},children:[Object(r.jsx)("input",Object(l.a)({},i())),Object(r.jsx)("p",{style:{fontWeight:"bold",marginBottom:0,color:(null===c||void 0===c||null===(t=c.documents)||void 0===t?void 0:t.length)>9?"gray":void 0},children:"Add document"}),je&&Object(r.jsxs)("div",{className:"file-error-container",children:[Object(r.jsx)("i",{style:{color:B.a.error},className:"fas fa-exclamation-triangle"}),Object(r.jsx)("div",{className:"file-error-msg-text",children:je})]})]}))}})}),Object(r.jsxs)(d.r,{className:"mt-3",children:[Object(r.jsx)(d.B,{children:W("description")}),Object(r.jsx)(d.O,{rows:3,type:"text",placeholder:W("description"),onChange:function(e){m(e)},autoComplete:"description",maxLength:1e3,value:(null===c||void 0===c?void 0:c.description)||"",onBlur:j,name:"description"})]})]})]}),Object(r.jsxs)("div",{className:"d-flex justify-content-between mt-4",children:[Object(r.jsx)("div",{children:"update"===S&&("Disable"===(null===I||void 0===I?void 0:I.status)||"Posted"===(null===I||void 0===I?void 0:I.status))&&Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)(d.N,{color:"success",size:"lg",variant:"3d",shape:"pill",onChange:function(){"Posted"===(null===c||void 0===c?void 0:c.status)&&A("status","Disable"),"Disable"===(null===c||void 0===c?void 0:c.status)&&A("status","Posted")},checked:"Posted"===(null===c||void 0===c?void 0:c.status),disabled:"Uploading"===(null===c||void 0===c?void 0:c.status)||"Draft"===(null===c||void 0===c?void 0:c.status)}),Object(r.jsx)("div",{className:"ml-2",children:"Posted"})]})}),Object(r.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end"},children:[(!!ut||"update"===S)&&Object(r.jsx)(d.d,{color:"danger",style:{width:100,marginRight:B.c[3]},className:"px-4",onClick:function(){return ut?ct({show:!0,title:"Are you sure you want to cancel? If yes, the video will be deleted.",left:"Yes",right:"No",callback:ot}):st("Are you sure you want to discard your changes?","Discard","Keep Editing",(function(){ct(Object(l.a)(Object(l.a)({},rt),{},{show:!1})),dt()}))},children:"Cancel"}),Object(r.jsx)(d.d,{color:"primary",className:"px-4",style:{width:100},type:"submit",disabled:Ve||("create"===S?!h:!h||!u&&((null===De||void 0===De?void 0:De.id)||"1")===I.category_id&&((null===Re||void 0===Re?void 0:Re.id)||"")===I.trainer_id),children:"Save"})]})]})]}),gt&&Object(r.jsx)("div",{className:"upload-file-container",children:Object(r.jsx)(D.a,{accept:".mp4,.wmv,.flv,.mov,.avi",maxFiles:1,maxSize:5e9,onDropRejected:function(e){ce("Cannot upload file larger than 5GB")},onDropAccepted:function(e){var t,n;ue(!0);var i=e[0];$e(e),ie(i),A("title",(null===i||void 0===i||null===(t=i.name)||void 0===t?void 0:t.substr(0,null===i||void 0===i||null===(n=i.name)||void 0===n?void 0:n.lastIndexOf(".")))||""),setTimeout((function(){p("title")})),A("video",URL.createObjectURL(i)),ce("")},children:function(e){var t=e.getRootProps,n=e.getInputProps;return Object(r.jsxs)("div",Object(l.a)(Object(l.a)({className:"drag-container"},t()),{},{children:[Object(r.jsx)("input",Object(l.a)({},n())),Object(r.jsx)("p",{style:{fontWeight:"bold"},children:"Drop and Drag file here, or click to select file"}),re&&Object(r.jsxs)("div",{className:"file-error-container",children:[Object(r.jsx)("i",{style:{color:B.a.error},className:"fas fa-exclamation-triangle"}),Object(r.jsx)("div",{className:"file-error-msg-text",children:re})]})]}))}})})]})}})})})})})})]})]})})},U=n(203),V=n.n(U),z=n(60),Q=n(190),K=n(1016),Y=n(974),H=n(966),q=n.n(H),J=n(78),W=n.n(J),X=n(1023),Z=n(1024),$="row",ee=function(e){var t=e.row,n=e.index,i=e.moveRow,a=e.fields,d=e.dragging,s=e.setDragging,u=e.records,m=e.setVideos,j=e.getVideos,g=Object(o.useRef)(null),h=Object(o.useRef)(null),A=Object(G.b)().callApi,p=Object(X.a)({accept:$,hover:function(e,t){var a;if(g.current){var r=e.index,c=n;if(d.active||s({active:!0,drag:u[r].priority,drop:-1}),r!==c){var o=null===(a=g.current)||void 0===a?void 0:a.getBoundingClientRect(),m=(o.bottom-o.top)/2,b=t.getClientOffset().y-o.top;r<c&&b<m||r>c&&b>m||(d.drag!==u[c].priority&&s((function(e){return Object(l.a)(Object(l.a)({},e),{},{drop:u[c].priority})})),i(r,c),e.index=c)}}},drop:function(){d.drag!==d.drop&&(m((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!0})})),A({method:"put",api:"/api/v1/admin/video/priorities",body:{position_drag:d.drag,position_drop:d.drop}},(function(){return j()})),s((function(e){return Object(l.a)(Object(l.a)({},e),{},{active:!1})})))}}),v=Object(c.a)(p,2)[1],f=Object(Z.a)({type:$,item:{type:$,index:n},collect:function(e){return{isDragging:!!e.isDragging()}}}),O=Object(c.a)(f,3),F=O[0].isDragging,x=O[1],y=F?0:1;return(0,O[2])(v(g)),x(h),Object(r.jsxs)("tr",{ref:g,style:{opacity:y},children:[Object(r.jsx)("td",{style:{width:"3%"},ref:h,children:Object(r.jsx)("i",{className:"fas fa-arrows-alt-v",style:{color:"#777",fontSize:18}})}),Object.keys(a).map((function(e,n){var i,l=e,c=a[l],d=t[l];return i=c.isDate?d?W()(1e3*d).format("DD/MM/YYYY"):"-":c.renderContent?c.renderContent(t):d,Object(r.jsx)("td",{style:c._style,children:c.disableMaxLine?i:Object(r.jsx)(b.t,{text:i})},n)}))]})},te=n.p+"static/media/SearchNoResults.ae017adf.svg",ne=function(e){var t=e.columns,n=e.videos,i=e.setVideos,a=e.fields,d=e.loading,s=e.addNo,u=e.getVideos,m=Object(o.useState)({active:!1,drag:-1,drop:-1}),b=Object(c.a)(m,2),j=b[0],g=b[1],h=n.data,A=function(e,t){var n=h[e];i((function(i){return Object(l.a)(Object(l.a)({},i),{},{data:q()(h,{$splice:[[e,1],[t,0,n]]}).map(s)})}))},p=Object(o.useCallback)((function(e){return Object(r.jsx)("div",{className:"table-loading-overlay".concat(e?" no-items":""),children:Object(r.jsx)("div",{className:"loading-spinner-wrapper",children:Object(r.jsx)("div",{className:"spinner-grow spinner-grow-lg text-primary","aria-hidden":"false","aria-label":"Loading",role:"status"})})})}),[]);return Object(r.jsx)(K.a,{backend:Y.a,children:Object(r.jsxs)("div",{className:"hb-table",children:[Object(r.jsxs)("table",{className:"table table-striped table-hover",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{style:{width:"3%"}}),t.map((function(e,t){return Object(r.jsx)("th",{style:a[e.key]._style,children:e.label},t)}))]})}),Object(r.jsxs)("tbody",{style:{minHeight:0===h.length?d?300:560:0},children:[!d&&0===h.length&&Object(r.jsx)("tr",{className:"tr-no-items",children:Object(r.jsx)("td",{children:Object(r.jsxs)("div",{className:"no-items-found",children:[Object(r.jsx)("img",{src:te}),Object(r.jsx)("div",{children:"No videos were found matching your search"})]})})}),h.map((function(e,t){return Object(r.jsx)(ee,{index:t,fields:a,row:e,moveRow:A,dragging:j,setDragging:g,records:h,setVideos:i,getVideos:u},null===e||void 0===e?void 0:e.id)}))]})]}),d&&p(0===h.length)]})})},ie={title:"",posture_type:"standing",description:"",category_id:"",trainer_id:"",tags:"",timeSchedule:null,video:null},ae=30,le={show:!1,type:"create",videoId:""};t.a=function(e){var t=e.trainerId,n=Object(s.c)(),i=Object(G.b)().callApi,h=Object(s.d)((function(e){return e.auth})),A=Object(o.useState)({data:[],loading:!0,page:1,total:0,totalPage:0,trainerName:""}),p=Object(c.a)(A,2),v=p[0],f=p[1],O=Object(o.useState)(""),F=Object(c.a)(O,2),x=F[0],y=F[1],C=Object(o.useState)(null),D=Object(c.a)(C,2),w=D[0],E=D[1],k=Object(o.useState)(null),S=Object(c.a)(k,2),I=S[0],T=S[1],R=Object(o.useState)(le),_=Object(c.a)(R,2),U=_[0],K=_[1],Y=Object(o.useState)(null),H=Object(c.a)(Y,2),q=H[0],J=H[1],W=Object(o.useState)(!1),X=Object(c.a)(W,2),Z=X[0],$=X[1],ee=Object(o.useState)(""),te=Object(c.a)(ee,2),re=te[0],ce=te[1],de=Object(o.useState)({data:[],loading:!0,full:!1,page:1}),oe=Object(c.a)(de,2),se=oe[0],ue=oe[1],me=Object(o.useState)(null),be=Object(c.a)(me,2),je=be[0],ge=be[1],he=Object(o.useState)(""),Ae=Object(c.a)(he,2),pe=Ae[0],ve=Ae[1],fe=Object(o.useState)({data:[],loading:!0,full:!1,page:1}),Oe=Object(c.a)(fe,2),Fe=Oe[0],xe=Oe[1],ye=Object(o.useState)(null),Ce=Object(c.a)(ye,2),De=Ce[0],Be=Ce[1],we=Object(o.useState)([]),Ee=Object(c.a)(we,2),ke=Ee[0],Se=Ee[1],Ne=JSON.parse(P.i.get("videosUploading"))||[],Pe={no:{label:"No",_style:{width:"3%"}},thumbnail:{label:"Thumbnail",_style:{width:"6%"},renderContent:function(e){return Object(r.jsx)(b.q,{src:e.custom_thumbnail||e.thumbnail||P.l,className:"video-thumbnail"})},disableMaxLine:!0},name:{label:"Title",_style:{width:"10%"}},description:{label:"Description",_style:{width:"13%"}},category_name:{label:"Category",_style:{width:"8%"},renderContent:function(e){return e.category_name||"Non category"}},trainer_name:{label:"Trainer",_style:{width:"8%"},renderContent:function(e){return e.trainer_name||"Non trainer"}},created_date:{label:"Created date",_style:{width:"8%"},isDate:!0},modified_date:{label:"Last modified",_style:{width:"8%"},isDate:!0},uploader:{label:"Uploader",_style:{width:"8%"}},tag:{label:"Tag",_style:{width:"5%"},renderContent:function(e){if(!e.tag)return Object(r.jsx)("div",{className:"align-middle",children:"-"});var t=e.tag.split(","),n=t.length>2;return n&&(t[1]+=" ..."),Object(r.jsx)("div",{title:n?e.tag:"",className:"align-middle",children:t.slice(0,2).map((function(e){return Object(r.jsx)("div",{children:e},e)}))})}},posture_type:{label:"Type",_style:{width:"7%"}},views:{label:"Views",_style:{width:"5%"}},comment:{label:"Comments",_style:{width:"6%"}},status:{label:"Status",_style:{width:"8%"},disableMaxLine:!0,renderContent:function(e){var t=Ne.findIndex((function(t){return t===e.id}))>-1&&-1===ke.findIndex((function(t){return t.id===e.id}))?"Upload Failed":e.status,n=ke.findIndex((function(t){return t.id===e.id})),i=null;return n>-1?i=Object(r.jsx)("div",{style:{borderRadius:100,overflow:"hidden"},children:Object(r.jsx)(N.a,{labelColor:"var(--primary)",isLabelVisible:!1,completed:ke[n].progress,height:"10px",baseBgColor:B.a.palette.lightBlue,bgColor:B.a.blue,transitionDuration:"0.5s",transitionTimingFunction:"linear"})}):"Processing"===e.status&&(i=Object(r.jsx)("div",{className:"d-flex",style:{height:20,marginLeft:10,marginTop:-10},children:Object(r.jsx)(L.a,{type:"bubbles",color:"var(--primary)",width:40})})),Object(r.jsxs)(r.Fragment,{children:[t,i]})}},action:{label:"Action",_style:{width:"6%"},renderContent:function(e){var t=Ne.findIndex((function(t){return t===e.id}))>-1&&-1===ke.findIndex((function(t){return t.id===e.id}))?"Upload Failed":e.status;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(d.d,{className:"mr-1",onClick:function(t){var n;t.stopPropagation(),J(Object(l.a)(Object(l.a)({},e),{},{title:null===e||void 0===e?void 0:e.name,tags:(null===e||void 0===e?void 0:e.tag)?null===e||void 0===e||null===(n=e.tag)||void 0===n?void 0:n.split(","):[],custom_thumbnail:e.custom_thumbnail||""})),K({show:!0,type:"update",videoId:e.id})},style:{visibility:"Upload Failed"===t?"hidden":"visible"},color:"primary",variant:"outline",shape:"square",size:"sm",children:Object(r.jsx)("i",{className:"fas fa-pencil-alt",children:" "})}),Object(r.jsx)(d.d,{onClick:function(t){t.stopPropagation(),J(Object(l.a)({},e)),$(!0)},color:"primary",variant:"outline",shape:"square",size:"sm",children:Object(r.jsx)("i",{className:"fas fa-trash-alt",children:" "})})]})}}},Ie=function(e,t,n){return isNaN(n)&&(n=v.page),Object(l.a)(Object(l.a)({},e),{},{no:t+1+ae*(n-1)})};Object(o.useEffect)((function(){Le(x)}),[w,je,De,I]),Object(o.useEffect)((function(){return(U.show||0!==ke.length)&&(window.onbeforeunload=function(){return!0}),function(){window.onbeforeunload=null}}),[ke,U.show]),Object(o.useEffect)((function(){Te("",1),Ge("",1),Ne.length>0&&i({method:"put",api:"/api/v1/mobility/videos",body:{videos:Ne.map((function(e){return{id:e,status:"Upload Failed"}}))}});var e=V.a.on(j.d.socketEvent.processedVideo,(function(e){var t=e.data,i=null===t||void 0===t?void 0:t.video_id,a=null===t||void 0===t?void 0:t.status;i&&(n(Object(z.c)("Video ".concat(null===t||void 0===t?void 0:t.title," has been Successfully processed"),"success",5e3)),f((function(e){var t=Object(l.a)({},e),n=t.data.findIndex((function(e){return e.id===i}));return n>-1&&(t.data[n].status=a),t})))}));return function(){V.a.rm(e)}}),[]);var Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;f((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!0})})),i({method:"get",api:t?j.d.rest.getVideosOfTrainer(t,je?je.id:"",w?w.id:"",ae,n,e,I?I.id:""):j.d.rest.getVideos(je?je.id:"",De?De.id:"",w?w.id:"",ae,n,e,I?I.id:"")},(function(e){var t=e.status,i=e.data;if(t===g.c){f({data:i.video.map((function(e,t){return Ie(e,t,n)})),loading:!1,total:i.total,totalPage:Math.ceil(i.total/ae),trainerName:i.trainer_name,page:n});var a=i.video.map((function(e){return e.status})).filter((function(e){return"Upload Failed"===e}));if(Ne.length>0){var r=Ne.filter((function(e){return!a.includes(e)}));P.i.set("videosUploading",JSON.stringify(r))}}else f((function(e){return Object(l.a)(Object(l.a)({},e),{},{loading:!1})}))}))},Te=function(e,t){i({method:"get",api:"/api/v1/admin/categories?page_size=10&search_name=".concat(e,"&page_number=").concat(t)},(function(n){var i=n.status,l=n.data;i===g.c&&ue((function(n){var i=l.data.map((function(e){return{id:e.id,name:e.title}}));return{data:1===t?""===e?[null,{id:"1",name:"Non-category"}].concat(Object(a.a)(i)):i:[].concat(Object(a.a)(n.data),Object(a.a)(i)),loading:!1,full:l.data.length<10,page:t}}))}))},Ge=function(e,t){i({method:"get",api:j.d.rest.adminGetMobilityTrainers(t,e,!0)},(function(n){var i=n.status,l=n.data;i===g.c&&xe((function(n){var i=l.trainers.map((function(e){return{id:e.id,name:e.first_name+" "+e.last_name}}));return{data:1===t?""===e?[null,{id:"%23",name:"Non-trainer"}].concat(Object(a.a)(i)):i:[].concat(Object(a.a)(n.data),Object(a.a)(i)),loading:!1,full:l.trainers.length<10,page:t}}))}))},Re=Object(o.useMemo)((function(){return Object.keys(Pe).map((function(e){return{label:Pe[e].label,key:e}}))}),[]),_e=v.loading;return Object(r.jsxs)("div",{className:"mx-5",children:[Object(r.jsx)(M,Object(l.a)(Object(l.a)({},U),{},{formValue:q,handleClose:function(){K(le),J(Object(l.a)({},ie))},addNo:Ie,satisfyFilter:function(e,t){return e.includes(w)&&t.includes(je.name)&&h.user_id.includes(De.id)},auth:h,uploadingVideos:ke,setUploadingVideos:Se,videos:v,setVideos:f,onSuccess:function(e,t){f((function(n){var i=Object(l.a)({},n),a=i.data.findIndex((function(t){return t.id===e}));if(a>-1){var r=i.data[a].status;t?i.data[a]=Object(l.a)(Object(l.a)(Object(l.a)({},i.data[a]),t),{},{status:"Uploading"===r||"Processing"===r?r:1===t.status?"Posted":"Disable"}):"create"===U.type&&"Uploading"===r&&(i.data[a].status="Processing"),"Posted"!==r&&"Disable"!==r||(i.data[a].modified_date=(new Date).getTime()/1e3)}return i}))}})),ke.length>0&&Object(r.jsx)(u.a,{when:!0,message:"Changes you made may not be saved."}),Object(r.jsx)(b.e,{isVisible:Z,title:"Delete Video?",renderContent:Object(P.a)("Are you want to delete video",null===q||void 0===q?void 0:q.name),leftButtonText:"No",rightButtonText:"Yes",leftButtonOnPress:function(){$(!1)},rightButtonOnPress:function(){$(!1),i({method:"delete",api:j.d.rest.editVideo(null===q||void 0===q?void 0:q.id),loading:!0},(function(e){e.status===g.c&&Le(x)}))}}),Object(r.jsx)("div",{children:Object(r.jsx)("h2",{children:t?Object(r.jsxs)("div",{className:"d-flex",children:[Object(r.jsx)(m.a,{className:"d-flex align-items-center mr-3",to:"/admin/mobility/trainers",children:Object(r.jsx)("i",{className:"fas fa-angle-left"})}),"Videos Of ",v.trainerName]}):"Video Management"})}),Object(r.jsxs)("div",{className:"d-flex justify-content-between my-4",children:[Object(r.jsxs)("div",{className:"d-flex",children:[Object(r.jsx)("div",{style:{width:"20%"},children:Object(r.jsx)(Q.a,{searchName:x,setSearchName:y,className:"mr-3",searchEmpty:!0,callbackSearch:Le})}),Object(r.jsx)("div",{style:{width:"20%"},children:Object(r.jsx)(b.x,{className:"mr-3",selected:w,setSelected:E,defaultValue:"Select status",data:j.i,loading:!1,full:!0,value:w?w.name:""})}),Object(r.jsx)("div",{style:{width:"20%"},children:Object(r.jsx)(b.x,Object(l.a)(Object(l.a)({className:"mr-3",selected:je,setSelected:ge,defaultValue:"Select category",value:re,setValue:ce,callbackSearch:Te},se),{},{maxLength:50}))}),!t&&Object(r.jsx)("div",{style:{width:"20%"},children:Object(r.jsx)(b.x,Object(l.a)(Object(l.a)({className:"mr-3",selected:De,setSelected:Be,defaultValue:"Select trainer",value:pe,setValue:ve,callbackSearch:Ge},Fe),{},{validation:j.d.validate.valueTypingExpressionsName,maxLength:50}))}),Object(r.jsx)("div",{style:{width:"20%"},children:Object(r.jsx)(b.x,{className:"mr-3",selected:I,setSelected:T,defaultValue:"Select type",data:j.h,loading:!1,full:!0,value:I?I.name:""})})]}),!t&&Object(r.jsx)(d.d,{onClick:function(){J(ie),K({show:!0,type:"create",videoId:""})},color:"primary",children:"Upload new video"})]}),Object(r.jsx)(ne,{columns:Re,videos:v,setVideos:f,fields:Pe,loading:_e,addNo:Ie,getVideos:function(){return Le(x,v.page)}}),Object(P.j)(v.totalPage,v.page,(function(e){v.page!==e&&Le(x,e)}),v.total)]})}}}]);
//# sourceMappingURL=8.55eed996.chunk.js.map