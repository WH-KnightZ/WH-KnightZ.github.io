{"version":3,"sources":["views/user/consulting/FriendRequest.tsx","views/user/mobility/Frame.tsx","views/user/consulting/FriendItem.tsx"],"names":["FriendRequest","dispatch","useDispatch","callApi","payload","callback","callApiAction","useState","data","loading","full","page","friends","setFriends","searchName","setSearchName","getListFriendRequest","method","api","config","rest","getListUsersConfirm","response","status","SUCCESS","length","useEffect","changeStatus","userId","changeStatusFriend","deleteFriend","searchParams","className","searchEmpty","callbackSearch","searchValue","validate","valueTypingExpressionsName","inputStyle","width","style","padding","display","justifyContent","alignItems","zIndex","listStyle","paddingLeft","marginBottom","placeholder","to","textAlign","map","friend","index","md","marginTop","first_name","last_name","img","avatar","id","size","render","loadingSmall","onEnter","mappingSize","large","medium","small","Frame","props","height","FriendItem","handleOpen","search","setPopUpCancel","setPopupRequestCancel","history","useHistory","success","setSuccess","borderRadius","border","cursor","onClick","push","src","alt","marginLeft","e","color","variant","show","console","log","checkStatus"],"mappings":"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","file":"static/js/48.197640b5.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { CCol, CContainer, CHeader, CRow } from '@coreui/react';\nimport { RouteComponentProps } from 'react-router';\nimport { Link } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { callApiAction, SUCCESS } from '../../../store/callApi/actions';\nimport config from '../../../config';\nimport Search from '../../../components/search/Search';\nimport { Waypoint } from 'react-waypoint';\nimport { loadingSmall } from '../../../extensions';\nimport Frame from '../mobility/Frame';\nimport FriendItem from './FriendItem';\n\nconst FriendRequest: React.FC<RouteComponentProps> = () => {\n  const dispatch = useDispatch();\n  const callApi = (payload: any, callback?: (result: any) => void) => dispatch(callApiAction(payload, callback));\n  const [friends, setFriends] = useState({ data: [], loading: true, full: false, page: 0 });\n  const [searchName, setSearchName] = useState('');\n  const pageSize = 10;\n\n  const getListFriendRequest = (searchName: any, page: any) => {\n    // get list friend request by search name, page from backend server\n\n    callApi(\n      {\n        // api method is get, url is config.rest.getListUsersConfirm, enable loading if page is 1\n        method: 'get',\n        api: config.rest.getListUsersConfirm(searchName, page, pageSize),\n        loading: page === 1,\n      },\n      (response) => {\n        // when call api success, get status, data of response\n        const { data, status } = response;\n        if (status === SUCCESS) {\n          // if status is SUCCESS, set state friends follow by data of backend\n          setFriends({\n            data: page === 1 ? data.friends : [...friends.data, ...data.friends],\n            full: data.friends.length < pageSize,\n            loading: false,\n            page: page,\n          });\n        }\n      },\n    );\n  };\n\n  useEffect(() => {\n    getListFriendRequest(searchName, 1);\n  }, []);\n\n  const changeStatus = (userId: any, status: any) => {\n    callApi(\n      {\n        method: status === 'confirm' ? 'put' : 'delete',\n        api: status === 'confirm' ? config.rest.changeStatusFriend(userId) : config.rest.deleteFriend(userId),\n        loading: true,\n      },\n      (response) => {\n        const { status } = response;\n        if (status === SUCCESS) {\n          // setFriends((friends: any) => ({\n          //   ...friends,\n          //   data: [...friends],\n          //   // data: friends.data.filter((friendId: any) => friendId.id !== userId),\n          // }));\n        }\n      },\n    );\n  };\n\n  const loadMoreFriends = () => {\n    if (friends.loading || friends.full) return;\n    setFriends({ ...friends, loading: true });\n    getListFriendRequest(searchName, friends.page + 1);\n  };\n\n  const searchParams: any = {\n    className: 'header-topic--wrapper__search--selection__world',\n    searchName,\n    setSearchName,\n    searchEmpty: true,\n    callbackSearch: (searchValue: string) => getListFriendRequest(searchValue, 1),\n    validate: config.validate.valueTypingExpressionsName,\n    inputStyle: { width: 400 },\n  };\n\n  return (\n    <div>\n      <CContainer>\n        <div className=\"add-friend-page-wrapper\">\n          <CHeader\n            style={{ padding: 10, display: 'flex', justifyContent: 'space-between', alignItems: 'center', zIndex: 1 }}\n          >\n            <h4>Friend Requests</h4>\n            <div style={{ width: 650 }}>\n              <ul\n                style={{\n                  listStyle: 'none',\n                  display: 'flex',\n                  paddingLeft: 0,\n                  justifyContent: 'space-between',\n                  marginBottom: 0,\n                  alignItems: 'center',\n                }}\n              >\n                <li>\n                  <Search {...searchParams} className=\"add-friend__search\" placeholder=\"Search friend\" />\n                </li>\n                <li>\n                  <Link to=\"/consulting/add-friend\">Friend List</Link>\n                </li>\n                <li>\n                  <Link to=\"/consulting/search-friend\">Search Friend</Link>\n                </li>\n              </ul>\n            </div>\n          </CHeader>\n          <div className=\"add-friend-main-page-body\">\n            <CRow>\n              {friends.data.length === 0 ? (\n                <div style={{ width: 100 + '%', textAlign: 'center' }}>No result</div>\n              ) : (\n                friends.data.map((friend: any, index: any) => (\n                  <CCol md={6} style={{ marginTop: '15px' }}>\n                    <FriendItem\n                      first_name={friend.first_name}\n                      last_name={friend.last_name}\n                      img={friend.avatar}\n                      id={friend.id}\n                      changeStatus={changeStatus}\n                      status=\"confirm\"\n                      key={index}\n                    />\n                  </CCol>\n                ))\n              )}\n            </CRow>\n          </div>\n          {friends.page !== 0 && friends.loading && <Frame size=\"large\" render={loadingSmall} />}\n          <Waypoint onEnter={loadMoreFriends} />\n        </div>\n      </CContainer>\n    </div>\n  );\n};\n\nexport default FriendRequest;\n","import React from 'react';\n\ninterface Props {\n  size: 'large' | 'medium' | 'small';\n  render: any;\n}\n\nconst mappingSize = { large: 80, medium: 48, small: 36 };\n\nconst Frame: React.FC<Props> = (props) => {\n  const { size, render } = props;\n\n  return (\n    <div className=\"video-comments--comment\">\n      <div style={{ width: '100%', height: mappingSize[size] }}>{render}</div>\n    </div>\n  );\n};\n\nexport default Frame;\n","import React, { useState } from 'react';\nimport { CButton, CImg } from '@coreui/react';\nimport { useHistory } from 'react-router';\n\ninterface Props {\n  first_name: string;\n  last_name: string;\n  img: any;\n  id: any;\n  changeStatus?: any;\n  status?: 'friend' | 'confirm' | 'cancel' | null;\n  menuPopup?: any;\n  handleOpen?: any;\n  handleClose?: any;\n  search?: any;\n  setPopUpCancel?: any;\n  setPopupRequestCancel?: any;\n}\n\nconst FriendItem: React.FC<Props> = (props) => {\n  const {\n    first_name,\n    last_name,\n    img,\n    id,\n    changeStatus,\n    status,\n    handleOpen,\n    search,\n    setPopUpCancel,\n    setPopupRequestCancel,\n  } = props;\n  const history = useHistory();\n  const [success, setSuccess] = useState('');\n\n  const checkStatus = (status: any, search: any) => {\n    if (status === 'friend') {\n      if (search === false)\n        return (\n          <div onClick={(e) => handleOpen(e, { id })}>\n            <i className=\"fas fa-ellipsis-h\"></i>\n          </div>\n        );\n\n      return (\n        <div>\n          <CButton\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              setPopUpCancel({ show: true });\n            }}\n          >\n            Unfriend\n          </CButton>\n          <CButton\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              console.log('123');\n              // history.push('/consulting/add-friend');\n            }}\n          >\n            <i className=\"fas fa-phone\"></i> Call\n          </CButton>\n        </div>\n      );\n    }\n\n    if (status === 'confirm') {\n      // Request removed\n      if (success !== '') return <div>{success}</div>;\n      return (\n        <div style={{ width: 150, display: 'flex', justifyContent: 'space-between' }}>\n          <CButton\n            id=\"btn_delete\"\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              changeStatus(id, 'cancel');\n              setSuccess('Request removed');\n            }}\n          >\n            Delete\n          </CButton>\n          <CButton\n            id=\"btn_confirm\"\n            color=\"primary\"\n            variant=\"outline\"\n            onClick={() => {\n              changeStatus(id, 'confirm');\n              setSuccess('Request accepted');\n            }}\n          >\n            Confirm\n          </CButton>\n        </div>\n      );\n    }\n    if (status === 'cancel') {\n      return (\n        <CButton color=\"primary\" variant=\"outline\" onClick={() => setPopupRequestCancel({ show: true })}>\n          Cancel request\n        </CButton>\n      );\n    }\n\n    return (\n      <CButton color=\"primary\" variant=\"outline\" onClick={() => changeStatus(id, null)}>\n        Add friend\n      </CButton>\n    );\n  };\n\n  return (\n    <div>\n      <div\n        className=\"friend-request-main-page-body--wrapper\"\n        style={{\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          borderRadius: 7,\n          border: '1px solid ',\n          padding: 8,\n        }}\n      >\n        <div\n          className=\"friend-request-main-page-body--information\"\n          style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', cursor: 'pointer' }}\n          onClick={() => history.push(`/consulting/information/${id}`)}\n        >\n          <CImg\n            src={img || 'https://i.stack.imgur.com/l60Hf.png'}\n            alt=\"Avatar\"\n            width={80}\n            height={80}\n            style={{ borderRadius: 10 }}\n          />\n          <h4 style={{ marginLeft: 20 }}>\n            {first_name} {last_name}\n          </h4>\n        </div>\n        <div className=\"friend-request-main-page-body--config\">{checkStatus(status, search)}</div>\n      </div>\n    </div>\n  );\n};\n\nexport default FriendItem;\n"],"sourceRoot":""}