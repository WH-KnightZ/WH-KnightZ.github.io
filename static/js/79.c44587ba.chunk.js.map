{"version":3,"sources":["assets/images/img_calendar.png","views/user/consulting/allAppointments/MainPage.tsx"],"names":["NURSE","APPOINTMENT_TYPES","ASSISTANT","PAGE_TITLES","UNITS","BUTTON_BOOK_LABELS","categories","Object","keys","TITLES","MainPage","history","useHistory","t","useTranslation","callApi","useApi","useAppointment","statistics","updateStatistics","appointmentType","useParams","useEffect","includes","values","method","api","config","rest","appointmentsStatistics","loading","body","appointment_type","APPOINTMENT_TYPE_VALUES","response","status","data","SUCCESS","appointment_statistics","push","title","noBackground","onBack","btnFilter","className","src","icCalendar","alt","onClick","map","category","index","value","unit","pluralize","requestType"],"mappings":"+cAAe,MAA0B,yCCmBjCA,EAAqBC,IAArBD,MAAOE,EAAcD,IAAdC,UACTC,GAAW,mBACdH,EAAQ,4BADM,cAEdE,EAAY,gCAFE,GAIXE,GAAK,mBACRJ,EAAQ,YADA,cAERE,EAAY,mBAFJ,GAILG,GAAkB,mBACrBL,EAAQ,+BADa,cAErBE,EAAY,mBAFS,GAIlBI,EAAU,YAAOC,OAAOC,KAAKC,WAoFpBC,EAlFiC,WAC9C,IAAMC,EAAUC,cACRC,EAAMC,cAAND,EACAE,EAAYC,cAAZD,QAH4C,EAIXE,cAAjCC,EAJ4C,EAI5CA,WAAYC,EAJgC,EAIhCA,iBACZC,EAAoBC,cAApBD,gBAERE,qBAAU,WAER,GAAKC,mBAAShB,OAAOiB,OAAOvB,KAAoBmB,GAAhD,CASEL,EACE,CACEU,OAAQ,OACRC,IAAKC,IAAOC,KAAKC,yBACjBC,SAAS,EACTC,KAAM,CAAEC,iBAAkBC,IAAwBb,MAEpD,SAACc,GAAmB,IACVC,EAAiBD,EAAjBC,OAAQC,EAASF,EAATE,KAChB,GAAID,IAAWE,IAAf,CAFiB,OAIuBD,GAAQ,IAAxCE,uBACRnB,OALiB,MAIgB,GAJhB,YAfrBR,EAAQ4B,KAAK,UA2Bd,IAWH,OACE,cAAC,IAAD,CACEC,MAAO3B,EAAEV,EAAYiB,IACrBqB,cAAY,EACZC,OAAQ,kBAAM/B,EAAQ4B,KAAK,gBAC3BI,UAAU,GAJZ,SAME,sBAAKC,UAAU,mCAAf,UACE,sBAAKA,UAAS,0CAAqCxB,GAAnD,UACE,sBAAKwB,UAAU,0CAAf,UACE,sEACA,qBAAKC,IAAKC,EAAYC,IAAI,QAE5B,cAAC,IAAD,CAAeH,UAAU,MAAMI,QAAS,kBAAMrC,EAAQ4B,KAAK,oCAA3D,SACGlC,EAAmBe,QAGxB,qBAAKwB,UAAU,8BAAf,SACGtC,EAAW2C,KAAI,SAACC,EAAUC,GAAX,OACd,cAAC,IAAD,CAEEP,UAAWxB,EACXoB,MAAO/B,SAAOyC,GACdE,MAAOlC,EAAWgC,IAAa,EAC/BG,KAAMC,YAAUpC,EAAWgC,GAAW9C,EAAMgB,IAC5C4B,QAAS,kBA7BgBO,EA6BkBL,OA5BrDvC,EAAQ4B,KAAR,sBAA4BnB,EAA5B,8BAAiEmC,IAD/B,IAACA,IAwBpBJ","file":"static/js/79.c44587ba.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/img_calendar.a9d2a070.png\";","import React, { useEffect } from 'react';\nimport { RouteComponentProps } from 'react-router';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { useTranslation } from 'react-i18next';\nimport { includes } from 'lodash';\n\nimport { HBButtonSmall } from 'hbBaseClass';\nimport AllAppointmentsLayout from './Layout';\nimport { AllAppointmentsCategoryItem } from 'components/screens/user';\nimport { TITLES } from './ViewAppointments';\nimport { SUCCESS, useApi } from 'store/callApi';\nimport { useAppointment } from 'store/appointment';\n\nimport { pluralize } from 'utilities';\nimport config from 'config';\nimport { APPOINTMENT_TYPES, APPOINTMENT_TYPE_VALUES } from 'configs/constants';\n\nimport icCalendar from 'assets/images/img_calendar.png';\n\nconst { NURSE, ASSISTANT } = APPOINTMENT_TYPES;\nconst PAGE_TITLES = {\n  [NURSE]: 'mainConsultingNurseTitle',\n  [ASSISTANT]: 'mainConsultingAssistantTitle',\n};\nconst UNITS = {\n  [NURSE]: 'Beratung',\n  [ASSISTANT]: 'Pflegeassistenz',\n};\nconst BUTTON_BOOK_LABELS = {\n  [NURSE]: 'Beratungstermin vereinbaren',\n  [ASSISTANT]: 'Assitenz buchen',\n};\nconst categories = [...Object.keys(TITLES)];\n\nconst MainPage: React.FC<RouteComponentProps> = () => {\n  const history = useHistory();\n  const { t } = useTranslation();\n  const { callApi } = useApi();\n  const { statistics, updateStatistics } = useAppointment();\n  const { appointmentType } = useParams<{ appointmentType: string }>();\n\n  useEffect(() => {\n    // if appointmentType is invalid => redirect to /404\n    if (!includes(Object.values(APPOINTMENT_TYPES), appointmentType)) {\n      history.push('/404');\n      return;\n    }\n\n    /**\n     * Get appointments statistics\n     */\n    const getAppointmentsStatistics = () => {\n      callApi(\n        {\n          method: 'post',\n          api: config.rest.appointmentsStatistics(),\n          loading: true,\n          body: { appointment_type: APPOINTMENT_TYPE_VALUES[appointmentType] },\n        },\n        (response: any) => {\n          const { status, data } = response;\n          if (status !== SUCCESS) return;\n\n          const { appointment_statistics = {} } = data || {};\n          updateStatistics(appointment_statistics);\n        },\n      );\n    };\n\n    getAppointmentsStatistics();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  /**\n   * Handle click view appointments\n   *\n   * @param requestType View appointments request type\n   */\n  const handleClickViewAppointments = (requestType: string) => {\n    history.push(`/consulting/${appointmentType}/view-appointments/${requestType}`);\n  };\n\n  return (\n    <AllAppointmentsLayout\n      title={t(PAGE_TITLES[appointmentType])}\n      noBackground\n      onBack={() => history.push('/consulting')}\n      btnFilter=\"\"\n    >\n      <div className=\"AppointmentsCategories-container\">\n        <div className={`AppointmentsCategories-bookArea ${appointmentType}`}>\n          <div className=\"AppointmentsCategories-bookArea_content\">\n            <p>Wie k√∂nnen wir Ihnen heute helfen?</p>\n            <img src={icCalendar} alt=\"\" />\n          </div>\n          <HBButtonSmall className=\"btn\" onClick={() => history.push('/consulting/book-an-appointment')}>\n            {BUTTON_BOOK_LABELS[appointmentType]}\n          </HBButtonSmall>\n        </div>\n        <div className=\"AppointmentsCategories-list\">\n          {categories.map((category, index) => (\n            <AllAppointmentsCategoryItem\n              key={index}\n              className={appointmentType}\n              title={TITLES[category]}\n              value={statistics[category] || 0}\n              unit={pluralize(statistics[category], UNITS[appointmentType])}\n              onClick={() => handleClickViewAppointments(category)}\n            />\n          ))}\n        </div>\n      </div>\n    </AllAppointmentsLayout>\n  );\n};\n\nexport default MainPage;\n"],"sourceRoot":""}