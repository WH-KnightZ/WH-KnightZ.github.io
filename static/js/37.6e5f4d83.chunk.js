(this["webpackJsonphb-frontend"]=this["webpackJsonphb-frontend"]||[]).push([[37],{610:function(e,t,n){"use strict";var i=n(3),a=(n(1),{large:80,medium:48,small:36});t.a=function(e){var t=e.size,n=e.render;return Object(i.jsx)("div",{className:"video-comments--comment",children:Object(i.jsx)("div",{style:{width:"100%",height:a[t]},children:n})})}},612:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return d})),n.d(t,"c",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"i",(function(){return h})),n.d(t,"j",(function(){return j})),n.d(t,"g",(function(){return m})),n.d(t,"a",(function(){return g})),n.d(t,"b",(function(){return _}));var i=n(78),a=n.n(i),c=n(29),o=n(73),r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maxTime,i=void 0===n?o.v:n,a=c.g.filter((function(t){return t>=e&&t<=i}));return a.map((function(e){return{label:e,value:e}}))},s=function(e){if(e)return e;var t=a()().add(2,"hours").format("HH:mm");return c.g.find((function(e){return e>=t&&e<="23:45"}))||t},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=a()("".concat(a()().format("YYYY-MM-DD")," ").concat(e));return e<o.w?n.add(t,"hours").format("HH:mm"):o.v},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e<"23:00"?d(e):o.v},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en";return e>1?"".concat(t).concat(n):t},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"".concat(e," ").concat(1===e?"\xdcbung":"\xdcbungen")},b=n(47),v=n(187),j=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.every((function(t){var i=t.id,a=t.required,c=t.question_type,r=t.answers,s=void 0===r?[]:r,d=s.reduce((function(e,t){return[].concat(Object(b.a)(e),[t.answer_title])}),[]),l=n[i]||{},u=l.answer,h=void 0===u?"":u,j=l.parentQuestionId;if(a&&!h)return!1;switch(c){case o.B.YES_NO:case o.B.RADIO:if(!Object(v.includes)(d,h))return!1;break;case o.B.TEXTBOX:if(h.length>o.u)return!1;if(j&&h.length>o.x)return!1}var m=s.find((function(e){return e.answer_title===h}));if(m){var f=m.sub_questions;if(!e(void 0===f?[]:f,n))return!1}return!0}))},m=function(e){var t=e||{},n=t.selectedOption,i=t.timeStart,c=t.specificDate,r=a()().format("YYYY-MM-DD"),s=a.a.duration(a()("".concat(r," ").concat(i)).diff(a()())).asHours(),d=a()(c).format("YYYY-MM-DD");return n===o.D.TOMORROW||n===o.D.LATER&&r<=d||s>=o.E},f=n(7),g=function(e){var t=e.selectedOption,n=e.specificDate,i=e.timeStart,c=e.timeEnd,r=a()();t!==o.D.TODAY&&(r=t===o.D.LATER?a()(n):a()().add(1,"d"));var s=r.format("YYYY-MM-DD");return{appointment_time_begin:a()("".concat(s," ").concat(i)).utc().unix(),appointment_time_end:a()("".concat(s," ").concat(c)).utc().unix()}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.f[o.e.NURSE],n=e||{},i=n.selectedTopic,a=n.adviceRelatives,c=void 0===a?[]:a,r=n.scheduleData,s=void 0===r?{}:r,d=n.userInfo,l=void 0===d?{}:d,u=n.surveyAnswers,h=void 0===u?{}:u,v=l.phone_number,j=void 0===v?"":v,m=l.street,_=l.gender,O=l.postal_code,p=l.no,x=l.place,y=Object(b.a)(Object.values(h)).reduce((function(e,t){var n=t||{},i=n.question_id,a=n.answer,c=n.question_title,o=n.parentQuestionId,r={question_id:i,answer:a,question_title:c};return o?e=e.map((function(e){var t=e||{},n=t.question_id,i=t.sub_questions;return n===o?Object(f.a)(Object(f.a)({},e),{},{sub_questions:[].concat(Object(b.a)(i),[r])}):e})):[].concat(Object(b.a)(e),[Object(f.a)(Object(f.a)({},r),{},{sub_questions:[]})])}),[]),w=g(s);return Object(f.a)({result_survey:{questions:y},appointment_type:t,selected_treatments_id:i,customer_gender:_,phone_number:j,street:m,postcode:O,no:p,place:x,relatives:c,cost:1},w)}},673:function(e,t,n){"use strict";t.a=n.p+"static/media/Saly-24.fc543b3d.png"},903:function(e,t,n){e.exports={mobilityWrapper:"MobilitySaved_mobilityWrapper__sMArV",btn:"MobilitySaved_btn__sv5Xg",title:"MobilitySaved_title__14cu5",searchBtn:"MobilitySaved_searchBtn__3shZs",altere:"MobilitySaved_altere__3ia4r",informationTrainer:"MobilitySaved_informationTrainer__pw6EV",amountView:"MobilitySaved_amountView__1Fxxs",hashtag:"MobilitySaved_hashtag__2NyTU",content:"MobilitySaved_content__2xWEz",hbSave:"MobilitySaved_hbSave__1JuA_",iconCross:"MobilitySaved_iconCross__2fPfl",noVideo:"MobilitySaved_noVideo__qK7NZ",thumbnail:"MobilitySaved_thumbnail__22JmS",itemContent:"MobilitySaved_itemContent__1E5XA",tags:"MobilitySaved_tags__2iHSX",wrapperContainer:"MobilitySaved_wrapperContainer__n31ni",itemInfo:"MobilitySaved_itemInfo__1IfiA",hashTag:"MobilitySaved_hashTag__3at1l",avatar:"MobilitySaved_avatar__3zZJs"}},996:function(e,t,n){"use strict";n.r(t);var i=n(3),a=n(7),c=n(47),o=n(16),r=n(1),s=n(38),d=n(29),l=n(39),u=n(189),h=n(31),b=n(610),v=n(115),j=n(903),m=n.n(j),f=n(673),g=n(32),_=n(193),O=(n(192),n(186)),p=n(96),x=n(612),y=86400,w=7*y,S=30*y,N=31104e3;t.default=function(){var e=Object(l.i)().search,t=new URLSearchParams(e).get("history")||"",n=Object(O.b)().callApi,j=Object(l.h)(),M=Object(r.useState)({data:[],loading:!0,full:!1,page:0}),k=Object(o.a)(M,2),D=k[0],C=k[1],T=Object(r.useState)(""),Y=Object(o.a)(T,2),A=Y[0],I=Y[1],E=Object(r.useState)(!1),R=Object(o.a)(E,2),q=R[0],W=R[1],H=Object(r.useState)(!1),V=Object(o.a)(H,2),B=V[0],z=V[1],J=t?"watch_history_id":"id",L=function(e,i){var a=Object(g.n)(i);n({method:"get",api:t?d.d.rest.getHistoryWatch(e,i,a):d.d.rest.getSearchVideos("1",e,"",a,i),loading:1===i},(function(e){var t=e.data;e.status===s.c&&C((function(e){return{data:1===i?t.videos:[].concat(Object(c.a)(e.data),Object(c.a)((n=e.data,o=t.videos,o.filter((function(e){return-1===n.findIndex((function(t){return t[J]===e[J]}))}))))),full:t.videos.length<a,loading:!1,page:i};var n,o}))}))},X=function(){W(!1)};Object(r.useEffect)((function(){var e;L(A,1),null===(e=window)||void 0===e||e.scrollTo(0,0)}),[]);var G={className:"header-topic--wrapper__search--selection__world",searchName:A,setSearchName:I,searchEmpty:!0,callbackSearch:function(e){z(!0),L(e,1)},isNew:!0,clearBtn:!0,onKeyPress:function(e){L(e,1)},timeoutSearch:0,callbackEmpty:function(){z(!0),L("",1)}},K=function(e){return Object(i.jsx)("div",{className:"hb-card-item",children:Object(i.jsxs)("div",{className:m.a.itemContent,style:{backgroundColor:"white",padding:15,borderRadius:32,height:181,display:"flex",alignItems:"center"},children:[Object(i.jsx)("div",{children:Object(i.jsx)(p.n,{backgroundImage:null===e||void 0===e?void 0:e.thumbnail,className:m.a.thumbnail,style:{overflow:"hidden",display:"block",borderRadius:20,width:150,height:150,backgroundSize:"cover",marginRight:20,cursor:"pointer"},onClick:function(){return j.push("/mobility/watch?video=".concat(null===e||void 0===e?void 0:e.id))}})}),Object(i.jsxs)("div",{className:m.a.itemInfo,style:{marginRight:20,width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",flex:1},children:[Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(i.jsxs)("div",{className:"".concat(m.a.informationTrainer," d-flex justify-content-between"),children:[Object(i.jsx)(p.n,{backgroundImage:(null===e||void 0===e?void 0:e.trainer_avatar)||h.d,className:m.a.avatar,style:{borderRadius:"50%",width:32,height:32,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",cursor:(null===e||void 0===e?void 0:e.trainer_id)?"pointer":"default"},onClick:function(){(null===e||void 0===e?void 0:e.trainer_id)&&j.push("/mobility/trainer-detail/".concat(null===e||void 0===e?void 0:e.trainer_id))}}),Object(i.jsx)(_.a,{interactive:!0,content:(null===e||void 0===e?void 0:e.viewed_amount)||"0",children:Object(i.jsxs)("div",{className:m.a.amountView,children:[Object(i.jsx)("i",{className:"hb-icon-eye"}),Object(i.jsx)("span",{children:Object(g.r)(null===e||void 0===e?void 0:e.viewed_amount)})]})})]}),Object(i.jsx)("div",{className:"".concat(t?m.a.hbSave:"hb-save"),onClick:function(){return t?function(e){var t=Object(a.a)({},D),i=Object(c.a)(null===D||void 0===D?void 0:D.data);i=i.filter((function(t){return(null===t||void 0===t?void 0:t.watch_history_id)!==e})),t.data=i,C(t),n({method:"delete",api:d.d.rest.removeHistoryWatch(e)},(function(e){e.status,console.log("response",e),s.c}))}(e.watch_history_id):(i=e.id,o=e.is_saved,C((function(e){var t=Object(c.a)(e.data),n=t.findIndex((function(e){return e.id===i}));return t[n].is_saved=!t[n].is_saved,Object(a.a)(Object(a.a)({},e),{},{data:t})})),void n({method:o?"put":"post",api:o?d.d.rest.unsaveVideo(i):d.d.rest.saveVideo(i)},(function(e){e.status,s.c})));var i,o},children:t?Object(i.jsx)("i",{className:"".concat(m.a.iconCross," hb-icon-cross")}):Object(i.jsx)("i",{className:"".concat(e.is_saved?"hb-icon-heart-s":"hb-icon-heart-r")})})]}),Object(i.jsx)("div",{className:m.a.content,onClick:function(){return j.push("/mobility/watch?video=".concat(null===e||void 0===e?void 0:e.id))},children:(null===e||void 0===e?void 0:e.title.length)>30?(null===e||void 0===e?void 0:e.title.slice(0,27))+"...":null===e||void 0===e?void 0:e.title})]}),Object(i.jsx)("div",{className:"d-flex ".concat(m.a.tags),style:{cursor:"pointer"},onClick:function(){return j.push("/mobility/watch?video=".concat(null===e||void 0===e?void 0:e.id))},children:Object(h.b)(e.category_name)})]})]})},t?null===e||void 0===e?void 0:e.watch_history_id:null===e||void 0===e?void 0:e.id)},P=[],U=function(e,n){var i=P.findIndex((function(t){return t.label===e}));-1===i?P.push({label:e,arr:[n],count:t||n.is_saved?1:0}):(P[i].arr.push(n),P[i].count+=t||n.is_saved?1:0)},Z=new Date,F=Z.getTime(),Q=3600*Z.getHours()+60*Z.getMinutes()+Z.getSeconds();return D.data.forEach((function(e){return function(e){var t=new Date(1e3*(e.saved_date||e.created_date)),n=(F-t.getTime())/1e3;U(n<Q?"Heute":(n+=86399-Q)<2*y?"1 Tag":n<w?Math.floor(n/y)+" Tage":n<2*w?"1 Woche":n<S?Math.floor(n/w)+" Wochen":n<5184e3?"1 Monat":n<N?Math.floor(n/S)+" Monate":n<2*N?"1 Jahr":Math.floor(n/N)+" Jahre",e)}(e)})),0===P.length&&!A&&D.loading?Object(i.jsx)("div",{}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(v.j,{show:q,handleClose:X,title:t?"Gesehene l\xf6schen":"Gespeicherte l\xf6schen",content:t?"Sind Sie sicher, dass Sie Ihre gesehenen \xdcbungen vollst\xe4ndig l\xf6schen m\xf6chten?":"Sind Sie sicher, dass Sie Ihre gespeicherten \xdcbungen vollst\xe4ndig l\xf6schen m\xf6chten?",up:"Ja, l\xf6schen",upCallback:function(){n({method:"delete",api:t?d.d.rest.clearAllHistoryWatch():d.d.rest.unsaveALLMobility(),loading:!0},(function(e){e.status===s.c&&(W(!1),C(Object(a.a)(Object(a.a)({},D),{},{data:[]})))}))},down:"Abbrechen",downCallback:X}),Object(i.jsxs)("div",{className:"hb-mx-20",children:[Object(i.jsxs)("div",{className:"d-flex justify-content-between hb-my-28",children:[Object(i.jsxs)(v.e,{className:m.a.btn,onClick:function(){return j.goBack()},children:[Object(i.jsx)("i",{className:"hb-icon-arrow-left hb-icon-md"})," Zur\xfcck"]}),0!==P.length&&Object(i.jsx)(v.e,{mini:!0,onClick:function(){W(!0),z(!1)},children:"Alle l\xf6schen"})]}),Object(i.jsx)("h1",{className:m.a.title,children:t?"Angesehene \xdcbungen":" Gespeicherte \xdcbungen"})]}),0!==P.length||B||A||D.loading?Object(i.jsx)("div",{className:"hb-card ".concat(m.a.wrapperContainer),children:Object(i.jsxs)("div",{className:"videos-saved--page",children:[Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("div",{className:"col-md-12",children:Object(i.jsx)(v.m,Object(a.a)(Object(a.a)({placeholder:"\xdcbung suchen"},G),{},{nightBlue:!0}))})}),P.map((function(e){return Object(i.jsxs)("div",{className:"levelDateWrapper",children:[Object(i.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(i.jsx)("h2",{className:"levelDateWrapperTitle",children:e.label}),Object(i.jsx)("div",{className:"levelDateWrapperAmountVideos",children:Object(x.i)(e.count)})]}),Object(i.jsx)("div",{className:m.a.mobilityWrapper,children:e.arr.map((function(e){return K(e)}))})]},e.label)})),0===P.length&&Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("p",{className:m.a.noVideo,children:"Keine Suchergebnisse"})}),0!==D.page&&D.loading&&Object(i.jsx)(b.a,{size:"large",render:h.g}),Object(i.jsx)(u.a,{onEnter:function(){D.loading||D.full||(C(Object(a.a)(Object(a.a)({},D),{},{loading:!0})),L(A,D.page+1))}})]})}):Object(i.jsx)("div",{className:"hb-no-content",children:Object(i.jsxs)("div",{className:"hb-no-content__image",children:[Object(i.jsxs)("div",{className:"image-content-wrap",children:[Object(i.jsx)("h2",{className:"image-content-title",children:"Keine ".concat(t?"Angesehene":"Gespeicherten"," \xdcbungen")}),!t&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h4",{className:"image-content",children:"Um \xdcbungen zu speichern, tippen"})," ",Object(i.jsx)("h4",{className:"image-content-below",children:"Sie auf das Herz beim \xdcbung."})]})]}),Object(i.jsx)("div",{style:{backgroundImage:'url("'.concat(f.a,'")')},className:"image-saly"})]})})]})}}}]);
//# sourceMappingURL=37.6e5f4d83.chunk.js.map